var fluid_0_8=fluid_0_8||{};var fluid=fluid||fluid_0_8;(function(u,q){q.thatistBridge=function(N,P){var O=function(Q){var S=Q.split(".");var R=P;for(var V=0;V<S.length;++V){R=R[S[V]]}var U=[this];if(arguments.length===2){U=U.concat(u.makeArray(arguments[1]))}var T=R.apply(null,U);this.that=function(){return T};var W=typeof(T);return !T||W==="string"||W==="number"||W==="boolean"||T&&T.length!==undefined?T:this};u.fn[N]=O;return O};q.thatistBridge("fluid",q);q.thatistBridge("fluid_0_8",fluid_0_8);var L="fluid-keyboard-a11y";var l=function(P,N){var O=u(P).data(L);return O?O[N]:undefined};var n=function(P,N,O){u(P).each(function(){var Q=u.data(this,L)||{};Q[N]=O;u.data(this,L,Q)})};var K=function(){return u.browser.msie?"tabIndex":"tabindex"};var w=function(N){if(N.length<=0){return false}return u(N[0]).is("a, input, button, select, area, textarea, object")};var z=function(O){if(O.length<=0){return undefined}if(!q.tabindex.hasAttr(O)){return w(O)?Number(0):undefined}var N=O.attr(K());return Number(N)};var x=function(N,O){return N.each(function(P,Q){u(Q).attr(K(),O)})};q.tabindex=function(O,N){O=u(O);if(N!==null&&N!==undefined){return x(O,N)}else{return z(O)}};q.tabindex.remove=function(N){N=u(N);return N.each(function(O,P){u(P).removeAttr(K())})};q.tabindex.hasAttr=function(O){O=u(O);if(O.length<=0){return false}var N=O.map(function(){var P=this.getAttributeNode(K());return P?P.specified:false});return N.length===1?N[0]:N};q.tabindex.has=function(N){N=u(N);return q.tabindex.hasAttr(N)||w(N)};var h="enablement";q.enabled=function(O,N){O=u(O);if(N===undefined){return l(O,h)!==false}else{u("*",O).each(function(){if(l(this,h)!==undefined){n(this,h,N)}else{if(/select|textarea|input/i.test(this.nodeName)){u(this).attr("disabled",!N)}}});n(O,h,N)}};q.a11y=u.a11y||{};q.a11y.keys={UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,TAB:9,ESC:27,CTRL:17,SHIFT:16,ALT:18};q.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var e={next:q.a11y.keys.DOWN,previous:q.a11y.keys.UP};var r={next:q.a11y.keys.RIGHT,previous:q.a11y.keys.LEFT};var c=function(N){return N.jquery?N[0]:N};var o=function(N){N.each(function(O,P){P=u(P);if(!P.fluid("tabindex.has")||P.fluid("tabindex")<0){P.fluid("tabindex",0)}})};q.tabbable=function(N){N=u(N);o(N)};var F="selectionContext";var D=-32768;var m=function(N){if(N.onLeaveContainer){N.onLeaveContainer(N.selectables[N.activeItemIndex])}else{if(N.onUnselect){N.onUnselect(N.selectables[N.activeItemIndex])}}if(!N.options.rememberSelectionState){N.activeItemIndex=D}};var g=function(N,O){if(O){O(N)}};var y=function(O,N){if(N&&O){N(O)}};var k=function(O,N){y(O,N.options.onUnselect)};var t=function(N,O){k(O.selectedElement(),O);N=c(N);var P=O.selectables.index(N);if(P===-1){return}O.activeItemIndex=P;g(N,O.options.onSelect)};var H=function(N){return function(O){t(O.target,N);return O.stopPropagation()}};var s=function(N){return function(O){k(O.target,N);return O.stopPropagation()}};var M=function(N){var O=N.selectables;if(N.activeItemIndex>=O.length){N.activeItemIndex=0}if(N.activeItemIndex<0&&N.activeItemIndex!==D){N.activeItemIndex=O.length-1}if(N.activeItemIndex>=0){u(O[N.activeItemIndex]).focus()}};var d=function(N){k(N.selectedElement(),N);if(N.activeItemIndex===D){N.activeItemIndex=-1}};var p=function(N){d(N);++N.activeItemIndex;M(N)};var f=function(N){d(N);--N.activeItemIndex;M(N)};var B=function(N,P,O){return function(Q){if(Q.which===P.next){p(N);Q.preventDefault()}else{if(Q.which===P.previous){f(N);Q.preventDefault()}}}};var G=function(N){var O;if(N===q.a11y.orientation.HORIZONTAL){O=r}else{if(N===q.a11y.orientation.VERTICAL){O=e}}return O};var J=function(N){return function(O){if(O.which!==q.a11y.keys.TAB){return}m(N);if(O.shiftKey){N.focusIsLeavingContainer=true}}};var A=function(N){return function(O){var Q=N.options.autoSelectFirstItem;var P=typeof(Q)==="function"?Q():Q;if(N.focusIsLeavingContainer){P=false}if(P&&O.target===N.container.get(0)){if(N.activeItemIndex===D){N.activeItemIndex=0}u(N.selectables[N.activeItemIndex]).focus()}return O.stopPropagation()}};var b=function(N){return function(O){N.focusIsLeavingContainer=false;return O.stopPropagation()}};var C=function(O,R,S){var P=u.extend(true,{},R,S);var T=G(P.direction);var N=P.selectableElements?P.selectableElements:O.find(P.selectableSelector);var Q={container:O,activeItemIndex:D,selectables:N,focusIsLeavingContainer:false,options:P};Q.selectablesUpdated=function(U){if(typeof(Q.options.selectablesTabindex)==="number"){Q.selectables.fluid("tabindex",Q.options.selectablesTabindex)}Q.selectables.unbind("focus."+L);Q.selectables.unbind("blur."+L);Q.selectables.bind("focus."+L,H(Q));Q.selectables.bind("blur."+L,s(Q));if(U){t(U,Q)}else{M(Q)}};Q.refresh=function(){if(!Q.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}Q.selectables=O.find(P.selectableSelector);Q.selectablesUpdated()};Q.selectedElement=function(){return Q.activeItemIndex<0?null:Q.selectables[Q.activeItemIndex]};if(T){O.keydown(B(Q,T))}O.keydown(J(Q));O.focus(A(Q));O.blur(b(Q));Q.selectablesUpdated();return Q};q.selectable=function(P,N){P=u(P);var O=C(P,q.selectable.defaults,N);n(P,F,O);return O};q.selectable.select=function(O,N){u(N).focus()};q.selectable.selectNext=function(N){N=u(N);p(l(N,F))};q.selectable.selectPrevious=function(N){N=u(N);f(l(N,F))};q.selectable.currentSelection=function(O){O=u(O);var N=l(O,F);return u(N.selectedElement())};q.selectable.defaults={direction:q.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};var j=function(S,O){if(!S.modifier){return true}var P=S.modifier;var Q=P&&O.ctrlKey;var N=P&&O.altKey;var R=P&&O.shiftKey;return Q||N||R};var I=function(N){return function(O){var R=O.target;if(!q.enabled(O.target)){return}var Q=O.which?O.which:O.keyCode;if(Q===N.key&&N.activateHandler&&j(N,O)){var P=N.activateHandler(O.target,O);if(P===false){O.preventDefault()}}}};var v=function(O,N){return function(P){if(!N){return}P=c(P);if(O.index(P)===-1){return}N(P)}};var j=function(S,O){if(!S.modifier){return true}var P=S.modifier;var Q=P&&O.ctrlKey;var N=P&&O.altKey;var R=P&&O.shiftKey;return Q||N||R};var E=function(Q,T,N,O){var S=[];u(N).each(function(U,V){S.push({modifier:null,key:V,activateHandler:T})});if(O&&O.additionalBindings){S=S.concat(O.additionalBindings)}n(Q,h,true);for(var P=0;P<S.length;++P){var R=S[P];Q.keydown(I(R))}};var a="defaultActivate";q.activatable=function(P,O,N){P=u(P);E(P,O,q.activatable.defaults.keys,N);n(P,a,v(P,O))};q.activate=function(O){O=u(O);var N=l(O,a);N(O)};q.activatable.defaults={keys:[q.a11y.keys.ENTER,q.a11y.keys.SPACE]}})(jQuery,fluid_0_8);(function(e){var c="http://www.w3.org/2005/07/aaa";var f=["main","secondary","navigation","banner","contentinfo","statements","note","seealso","search"];var a=new RegExp("^"+f.join("|")+"$");var d=e.browser.mozilla&&(parseFloat(e.browser.version)<1.9);var b=(function(){if(d){return function(j,g,h){if(typeof h!="undefined"){j.each(function(k,l){l.setAttributeNS(c,"aaa:"+g,h)})}else{return j.get(0).getAttributeNS(c,g)}}}else{return function(j,g,h){if(typeof h!="undefined"){j.each(function(k,l){e(l).attr("aria-"+g,h)})}else{return j.attr("aria-"+g)}}}})();e.fn.extend({ariaRole:function(h){var g=this;if(h){h=(a.test(h)||!d)?h:"wairole:"+h;g.each(function(j,k){e(k).attr("role",h)});return g}else{var h=g.eq(0).attr("role");if(h){h=h.replace(/^wairole:/,"")}return h}},ariaState:function(){var g=arguments;var h=this;if(g.length==2){h.each(function(j,k){b(e(k),g[0],g[1])});return h}else{if(typeof g[0]=="string"){return b(h.eq(0),g[0])}else{h.each(function(j,k){e.each(g[0],function(l,m){e(k).ariaState(l,m)})});return h}}}});e.extend(e.expr[":"],{ariaRole:"jQuery(a).ariaRole()==m[3]",ariaState:"jQuery(a).ariaState(m[3].split(/=/)[0])==(/=/.test(m[3])?m[3].split(/=/)[1]:'true')"})})(jQuery);(function(e){var b={},l,n,p,k=e.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),a=false;e.tooltip={blocked:false,defaults:{delay:200,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){e.tooltip.blocked=!e.tooltip.blocked}};e.fn.extend({tooltip:function(q){q=e.extend({},e.tooltip.defaults,q);h(q);return this.each(function(){e.data(this,"tooltip-settings",q);this.tooltipText=this.title;e(this).removeAttr("title");this.alt=""}).hover(m,f).click(f)},fixPNG:k?function(){return this.each(function(){var q=e(this).css("backgroundImage");if(q.match(/^url\(["']?(.*\.png)["']?\)$/i)){q=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+q+"')"}).each(function(){var r=e(this).css("position");if(r!="absolute"&&r!="relative"){e(this).css("position","relative")}})}})}:function(){return this},unfixPNG:k?function(){return this.each(function(){e(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){e(this)[e(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function h(q){if(b.parent){return}b.parent=e('<div id="'+q.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){b.parent.bgiframe()}b.title=e("h3",b.parent);b.body=e("div.body",b.parent);b.url=e("div.url",b.parent)}function c(q){return e.data(q,"tooltip-settings")}function g(q){if(c(this).delay){p=setTimeout(o,c(this).delay)}else{o()}a=!!c(this).track;e(document.body).bind("mousemove",d);d(q)}function m(){if(e.tooltip.blocked||this==l||(!this.tooltipText&&!c(this).bodyHandler)){return}l=this;n=this.tooltipText;if(c(this).bodyHandler){b.title.hide();var t=c(this).bodyHandler.call(this);if(t.nodeType||t.jquery){b.body.empty().append(t)}else{b.body.html(t)}b.body.show()}else{if(c(this).showBody){var s=n.split(c(this).showBody);b.title.html(s.shift()).show();b.body.empty();
for(var r=0,q;q=s[r];r++){if(r>0){b.body.append("<br/>")}b.body.append(q)}b.body.hideWhenEmpty()}else{b.title.html(n).show();b.body.hide()}}if(c(this).showURL&&e(this).url()){b.url.html(e(this).url().replace("http://","")).show()}else{b.url.hide()}b.parent.addClass(c(this).extraClass);if(c(this).fixPNG){b.parent.fixPNG()}g.apply(this,arguments)}function o(){p=null;b.parent.show();d()}function d(s){if(e.tooltip.blocked){return}if(!a&&b.parent.is(":visible")){e(document.body).unbind("mousemove",d)}if(l==null){e(document.body).unbind("mousemove",d);return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var u=b.parent[0].offsetLeft;var t=b.parent[0].offsetTop;if(s){u=s.pageX+c(l).left;t=s.pageY+c(l).top;b.parent.css({left:u+"px",top:t+"px"})}var q=j(),r=b.parent[0];if(q.x+q.cx<r.offsetLeft+r.offsetWidth){u-=r.offsetWidth+20+c(l).left;b.parent.css({left:u+"px"}).addClass("viewport-right")}if(q.y+q.cy<r.offsetTop+r.offsetHeight){t-=r.offsetHeight+20+c(l).top;b.parent.css({top:t+"px"}).addClass("viewport-bottom")}}function j(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function f(q){if(e.tooltip.blocked){return}if(p){clearTimeout(p)}l=null;b.parent.hide().removeClass(c(this).extraClass);if(c(this).fixPNG){b.parent.unfixPNG()}}e.fn.Tooltip=e.fn.tooltip})(jQuery);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}();
/*! SWFObject v2.1 <http://code.google.com/p/swfobject/>
	Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
	This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
}var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";
for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 Beta 5 2008-01-29";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);
this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id);if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;
this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(a,b){this.queueEvent("file_dialog_complete_handler",[a,b])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};var fluid_0_8=fluid_0_8||{};var fluid=fluid||fluid_0_8;(function(f,e){e.version="Infusion 0.8";e.fail=function(h){e.setLogging(true);e.log(h.message?h.message:h);h.fail()};e.wrap=function(h){return((!h||h.jquery)?h:f(h))};e.unwrap=function(h){return h&&h.jquery&&h.length===1?h[0]:h};e.findKeyInObject=function(k,j){for(var h in k){if(k[h]===j){return h}}return null};e.clear=function(j){if(j instanceof Array){j.length=0}else{for(var h in j){delete j[h]}}};e.container=function(j){var h=j;if(typeof j==="string"||j.nodeType&&(j.nodeType===1||j.nodeType===9)){h=f(j)}if(!h||!h.jquery||h.length!==1){if(typeof(j)!=="string"){j=h.selector}e.fail({name:"NotOne",message:"A single container element was not found for selector "+j})}return h};var c={};var b={};e.defaults=function(){var l=0;var j=c;if(typeof arguments[0]==="boolean"){j=b;l=1}var h=arguments[l];var k=arguments[l+1];if(k!==undefined){j[h]=k;return k}return j[h]};e.createDomBinder=function(j,l){var k={},m={};function n(p,o){return f.data(e.unwrap(o))+"-"+p}function h(q,p,o){k[n(q,p)]=o}m.locate=function(q,s){var o,p,r;o=l[q];p=s?s:j;if(!p){e.fail("DOM binder invoked for selector "+q+" without container")}if(!o){return p}if(typeof(o)==="function"){r=f(o.call(null,e.unwrap(p)))}else{r=f(o,p)}if(r.get(0)===document){r=[]}if(!r.selector){r.selector=o;r.context=p}r.selectorName=q;h(q,p,r);return r};m.fastLocate=function(p,s){var o=s?s:j;var q=n(p,o);var r=k[q];return r?r:m.locate(p,s)};m.clear=function(){k={}};m.refresh=function(r,s){var p=s?s:j;if(typeof r==="string"){r=[r]}if(p.length===undefined){p=[p]}for(var q=0;q<r.length;++q){for(var o=0;o<p.length;++o){m.locate(r[q],p[o])}}};return m};e.mergeListeners=function(k,n){if(n){for(var j in n){var o=n[j];var p=j.indexOf(".");var m;if(p!==-1){m=j.substring(p+1);j=j.substring(0,p)}if(!k[j]){k[j]=e.event.getEventFirer()}var l=k[j];if(typeof(o)==="function"){l.addListener(o,m)}else{if(o&&typeof o.length==="number"){for(var h=0;h<o.length;++h){l.addListener(o[h],m)}}}}}};e.instantiateFirers=function(l,h){l.events={};if(h.events){for(var k in h.events){var j=h.events[k];l.events[k]=e.event.getEventFirer(j==="unicast",j==="preventable")}}e.mergeListeners(l.events,h.listeners)};e.mergeComponentOptions=function(j,h,l){var k=e.defaults(h);j.options=e.merge(k?k.mergePolicy:null,{},k,l)};e.expectFilledSelector=function(h,j){if(h&&h.length===0&&h.jquery){e.fail(j+': selector "'+h.selector+'" with name '+h.selectorName+" returned no results in context "+e.dumpEl(h.context))}};e.initView=function(j,h,l){var k={};e.expectFilledSelector(h,'Error instantiating component with name "'+j);e.mergeComponentOptions(k,j,l);if(h){k.container=e.container(h);e.initDomBinder(k)}e.instantiateFirers(k,k.options);return k};e.COMPONENT_OPTIONS={};e.VALUE={};e.emptySubcomponent=function(h){var k={};h=f.makeArray(h);for(var j=0;j<h.length;++j){k[h[j]]=function(){}}return k};e.initSubcomponent=function(k,j,h){return e.initSubcomponents(k,j,h)[0]};e.initSubcomponents=function(o,p,q){var r=o.options[p];if(!r){return}var n=f.makeArray(r);var s=-1;var k=[];q=f.makeArray(q);for(var m=0;m<q.length;++m){if(q[m]===e.COMPONENT_OPTIONS){s=m}}for(m=0;m<n.length;++m){r=n[m];if(s!==-1&&r.options){q[s]=r.options}if(typeof(r)!=="function"){var l=typeof(r)==="string"?r:r.type;var h=e.defaults(true,l);e.merge("reverse",o.options,h);k[m]=l==="fluid.emptySubcomponent"?e.emptySubcomponent(r.options):e.invokeGlobalFunction(l,q,{fluid:e})}else{k[m]=r.apply(null,q)}var j=k[m]?k[m].returnedOptions:null;if(j){e.merge(o.options.mergePolicy,o.options,j);if(j.listeners){e.mergeListeners(o.events,j.listeners)}}}return k};e.initDomBinder=function(h){h.dom=e.createDomBinder(h.container,h.options.selectors);h.locate=h.dom.locate};e.isPrimitive=function(h){var j=typeof(h);return !h||j==="string"||j==="boolean"||j==="number"};function g(n,p,m,h){var q=n&&typeof(n)!=="string"?n[p]:n;if(typeof(q)==="function"){q.apply(null,m,h);return m}if(q==="replace"){e.clear(m)}for(var k in h){var r=(p?p+".":"")+k;
var o=m[k];var l=h[k];var j=e.isPrimitive(o);if(l!==undefined){if(l!==null&&typeof l==="object"&&!l.nodeType&&!l.jquery&&l!==e.VALUE){if(j){m[k]=o=l instanceof Array?[]:{}}g(n,r,o,l)}else{if(o===null||o===undefined||q!=="reverse"){m[k]=l}}}}return m}e.merge=function(m,l){var q="";for(var k=2;k<arguments.length;++k){var h=arguments[k];if(h!==null&&h!==undefined){g(m,q,l,h)}}if(m&&typeof(m)!=="string"){for(var o in m){var p=m[o];if(typeof(p)==="string"&&p!=="replace"){var j=e.model.getBeanValue(l,o);if(j===null||j===undefined){var n=e.model.getBeanValue(l,p);e.model.setBeanValue(l,o,n)}}}}return l};e.copy=function(h){return f.extend(true,{},h)};e.invokeGlobalFunction=function(j,k,h){var l=e.model.getBeanValue(window,j,h);if(!l){e.fail("Error invoking global function: "+j+" could not be located")}else{return l.apply(null,k)}};e.event={};var a=1;e.event.getEventFirer=function(k,l){var j=e.log;var h={};return{addListener:function(n,m){if(!n){return}if(k){m="unicast"}if(!m){if(!n.$$guid){n.$$guid=a+=1}m=n.$$guid}h[m]={listener:n}},removeListener:function(m){if(typeof(m)==="string"){delete h[m]}else{if(typeof(m)==="object"&&m.$$guid){delete h[m.$$guid]}}},fire:function(){for(var o in h){var m=h[o];try{var n=m.listener.apply(null,arguments);if(l&&n===true){return true}}catch(p){j("FireEvent received exception "+p.message+" e "+p+" firing to listener "+o);throw (p)}}}}};e.model={};e.model.copyModel=function(j,h){e.clear(j);f.extend(true,j,h)};e.model.parseEL=function(h){return h.toString().split(".")};e.model.composePath=function(h,j){return h===""?j:h+"."+j};e.model.setBeanValue=function(j,l,m){var h=e.model.parseEL(l);for(var k=0;k<h.length-1;k+=1){if(!j[h[k]]){j[h[k]]={}}j=j[h[k]]}j[h[h.length-1]]=m};e.model.getBeanValue=function(k,n,h){if(n===""||n===null||n===undefined){return k}var j=e.model.parseEL(n);for(var l=0;l<j.length;++l){if(!k){return k}var m=j[l];if(h&&h[m]){k=h[m];h=null}else{k=k[m]}}return k};var d;e.setLogging=function(h){if(typeof h=="boolean"){d=h}else{d=false}};e.log=function(h){if(d){h=new Date().toTimeString()+":  "+h;if(typeof(console)!=="undefined"){if(console.debug){console.debug(h)}else{console.log(h)}}else{if(typeof(YAHOO)!=="undefined"){YAHOO.log(h)}else{if(typeof(opera)!=="undefined"){opera.postError(h)}}}}};e.dumpEl=function(j){var k;if(!j){return"null"}if(j.nodeType===3||j.nodeType===8){return"[data: "+j.data+"]"}if(j.nodeType===9){return"[document: location "+j.location+"]"}if(typeof j.length==="number"){k="[";for(var h=0;h<j.length;++h){k+=e.dumpEl(j[h]);if(h<j.length-1){k+=", "}}return k+"]"}j=f(j);k=j.get(0).tagName;if(j.attr("id")){k+="#"+j.attr("id")}if(j.attr("class")){k+="."+j.attr("class")}return k};e.findAncestor=function(h,j){h=e.unwrap(h);while(h){if(j(h)){return h}h=h.parentNode}};e.jById=function(l,k){k=k&&k.nodeType===9?k:document;var h=e.byId(l,k);var j=h?f(h):[];j.selector="#"+l;j.context=k;return j};e.byId=function(k,j){j=j&&j.nodeType===9?j:document;var h=j.getElementById(k);if(h){if(h.getAttribute("id")!==k){e.fail("Problem in document structure - picked up element "+e.dumpEl(h)+" for id "+k+" without this id - most likely the element has a name which conflicts with this id")}return h}else{return null}};e.getId=function(h){return e.unwrap(h).getAttribute("id")};e.allocateSimpleId=function(h){h=e.unwrap(h);if(!h.id){h.id="fluid-id-"+(a++)}return h.id};e.transform=function(n){var m=[];for(var l=0;l<n.length;++l){var h=n[l];for(var k=0;k<arguments.length-1;++k){h=arguments[k+1](h,l)}m[m.length]=h}return m};e.find=function(l,k,m){for(var j=0;j<l.length;++j){var h=k(l[j],j);if(h!==null&&h!==undefined){return h}}return m};e.accumulate=function(l,k,h){for(var j=0;j<l.length;++j){h=k(l[j],h,j)}return h};e.remove_if=function(k,j){for(var h=0;h<k.length;++h){if(j(k[h],h)){k.splice(h,1);--h}}return k};e.formatMessage=function(k,h){if(!h){return k}if(typeof(h)==="string"){h=[h]}for(var j=0;j<h.length;++j){k=k.replace("{"+j+"}",h[j])}return k};e.messageLocator=function(h){return function(j,k){if(typeof(j)==="string"){j=[j]}for(var l=0;l<j.length;++l){var n=j[l];var m=h[n];if(m===undefined){continue}return e.formatMessage(m,k)}return"[Message string for key "+j[0]+" not found]"}};e.stringTemplate=function(m,j){var l=m;for(var k in j){if(j.hasOwnProperty(k)){var h="%"+k;l=l.replace(h,j[k])}}return l}})(jQuery,fluid_0_8);(function(a){a("head").append("<style type='text/css'>.fl-progressive-enhanceable { display: none; }</style>")})(jQuery);var fluid_0_8=fluid_0_8||{};(function(c,b){b.dom=b.dom||{};var a=function(d){if(d.node.firstChild){d.node=d.node.firstChild;d.depth+=1;return d}while(d.node){if(d.node.nextSibling){d.node=d.node.nextSibling;return d}d.node=d.node.parentNode;d.depth-=1}return d};b.dom.iterateDom=function(h,g){var f={node:h,depth:0};var e=h;while(f.node!==null&&f.depth>=0&&f.depth<b.dom.iterateDom.DOM_BAIL_DEPTH){var d=false;if(f.node.nodeType===1){d=g(f.node,f.depth)}if(d){f.node.parentNode.removeChild(f.node);f.node=e}e=f.node;f=a(f)}};b.dom.iterateDom.DOM_BAIL_DEPTH=256;b.dom.computeAbsolutePosition=function(d){var f=0,e=0;if(d.offsetParent){do{f+=d.offsetLeft;e+=d.offsetTop;d=d.offsetParent}while(d);return[f,e]}};b.dom.isContainer=function(d,e){for(;e;e=e.parentNode){if(d===e){return true}}return false};b.dom.insertAfter=function(d,e){var f=e.nextSibling;if(!f){e.parentNode.appendChild(d)}else{e.parentNode.insertBefore(d,f)}};b.dom.isWhitespaceNode=function(d){return !(/[^\t\n\r ]/.test(d.data))};b.dom.isIgnorableNode=function(d){return(d.nodeType===8)||((d.nodeType===3)&&b.dom.isWhitespaceNode(d))};b.dom.getElementText=function(f){var d=f.childNodes;var g="";for(var e=0;e<d.length;++e){var h=d[e];if(h.nodeType==3){g=g+h.nodeValue}}return g};b.dom.cleanseScripts=function(d){var e=c.data(d,b.dom.cleanseScripts.MARKER);if(!e){b.dom.iterateDom(d,function(f){return(f.tagName.toLowerCase()==="script")});c.data(d,b.dom.cleanseScripts.MARKER,true)}};b.dom.cleanseScripts.MARKER="fluid-scripts-cleansed"})(jQuery,fluid_0_8);var fluid_0_8=fluid_0_8||{};(function(f,g){g.orientation={HORIZONTAL:4,VERTICAL:1};g.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};g.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};g.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};g.directionSign=function(l){return l===g.direction.UP||l===g.direction.LEFT?g.direction.PREVIOUS:g.direction.NEXT};g.directionAxis=function(l){return l===g.direction.LEFT||l===g.direction.RIGHT?0:1};g.directionOrientation=function(l){return g.directionAxis(l)?g.orientation.VERTICAL:g.orientation.HORIZONTAL};g.keycodeDirection={up:g.direction.UP,down:g.direction.DOWN,left:g.direction.LEFT,right:g.direction.RIGHT};g.moveDom=function(n,o,l){n=g.unwrap(n);o=g.unwrap(o);var m;if(l===g.position.INSIDE){o.appendChild(n)}else{if(l===g.position.BEFORE){for(m=o.previousSibling;;m=m.previousSibling){if(!m||!g.dom.isIgnorableNode(m)){if(m!==n){g.dom.cleanseScripts(n);o.parentNode.insertBefore(n,o)}break}}}else{if(l===g.position.AFTER){for(m=o.nextSibling;;m=m.nextSibling){if(!m||!g.dom.isIgnorableNode(m)){if(m!==n){g.dom.cleanseScripts(n);g.dom.insertAfter(n,o)}break}}}else{g.fail("Unrecognised position supplied to fluid.moveDom: "+l)}}}};g.normalisePosition=function(m,o,l,n){if(m===g.position.REPLACE){m=o&&l>=n?g.position.AFTER:g.position.BEFORE}return m};g.permuteDom=function(o,s,r,m,p){o=g.unwrap(o);s=g.unwrap(s);var q=f.inArray(o,m);if(q===-1){g.fail("Error in permuteDom: source element "+g.dumpEl(o)+" not found in source list "+g.dumpEl(m))}var w=f.inArray(s,p);if(w===-1){g.fail("Error in permuteDom: target element "+g.dumpEl(s)+" not found in source list "+g.dumpEl(p))}var l=m===p;r=g.normalisePosition(r,l,w,q);var v={};v[g.position.AFTER]=o.nextSibling;v[g.position.BEFORE]=o.previousSibling;g.moveDom(m[q],p[w],r);var u=l?w-1:m.length-2;var n;if(!l||w>q){for(n=u;n>q;--n){g.moveDom(m[n+1],m[n],g.position.AFTER)}if(q+1<m.length){g.moveDom(m[q+1],v[g.position.AFTER],g.position.BEFORE)}}var t=l?q-1:p.length-1;if(r===g.position.AFTER){w++}if(!l||w<q){for(n=w;n<t;++n){g.moveDom(p[n],p[n+1],g.position.BEFORE)}if(t>=0&&t<p.length-1){g.moveDom(p[t],v[g.position.BEFORE],g.position.AFTER)}}};var b=function(l,m){return window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue(m):l.currentStyle[m]};var h=function(l){while(l){if(l.tagName.toLowerCase()==="body"){return true}l=l.parentNode}return false};var k=function(l){return"hidden"==l.type||b(l,"display")==="none"||b(l,"visibility")==="hidden"||!h(l)};var e=function(n,m,r){var p={};p.element=n;p.orientation=m;if(r===g.position.INSIDE){p.position=r}if(k(n)){p.clazz="hidden"}var q=g.dom.computeAbsolutePosition(n)||[0,0];var o=n.offsetWidth;var l=n.offsetHeight;p.rect={left:q[0],top:q[1]};p.rect.right=q[0]+o;p.rect.bottom=q[1]+l;return p};var c=10000;function d(l){return"Rect top: "+l.top+" left: "+l.left+" bottom: "+l.bottom+" right: "+l.right}function j(l){if(!l||!l.rect){return"null"}else{return d(l.rect)+" position: "+l.position+" for "+g.dumpEl(l.element)}}g.dropManager=function(){var t=[];var m={};var s={};var o;function u(y){return f(y).data("")}function v(y,D,B,C,E,A){var z=f.extend(true,{},B);z.rect[D[C]]=z.rect[D[1-C]]+(C?1:-1);z.rect[D[1-C]]=(C?-1:1)*c;z.position=E===g.position.INSIDE?E:(C?g.position.BEFORE:g.position.AFTER);z.clazz=A;y[y.length]=z}function r(B,z,A,y,D,C){var G=f.extend(true,{},A);var E=f.extend(true,{},A);var F=(G.rect[z[0]]+G.rect[z[1]])/2;G.rect[z[1]]=F;G.position=g.position.BEFORE;E.rect[z[0]]=F;E.position=g.position.AFTER;G.clazz=D;E.clazz=C;B[B.length]=G;B[B.length]=E}function q(A,z,B,y,C){z+=B;if(z<0&&y==="locked"){return"locked"}if(z>=A.length||C===null){return null}else{var B=A[z];return C(B)==="locked"&&y==="locked"?"locked":null}}var p;var n,l;s.updateGeometry=function(H){p=H;t=[];m={};var y=H.elementMapper;for(var G=0;G<H.extents.length;++G){var C=H.extents[G];var z=C.orientation;var A=g.rectSides[z];function B(M,J,P,Q,L){var K=e(M,z,Q);K.owner=C;if(K.clazz!=="hidden"&&y){K.clazz=y(M)}m[f.data(M)]=K;
var N=q(C.elements,L,g.position.BEFORE,K.clazz,y);var O=q(C.elements,L,g.position.AFTER,K.clazz,y);if(Q===g.position.INSIDE){t[t.length]=K}else{r(t,A,K,Q,N,O)}if(J&&H.sentinelize){v(t,A,K,1,Q,N)}if(P&&H.sentinelize){v(t,A,K,0,Q,O)}return K}var I=true;for(var D=0;D<C.elements.length;++D){var F=C.elements[D];var E=B(F,D===0,D===C.elements.length-1,g.position.INTERLEAVED,D);if(E.clazz!=="hidden"){I=false}}if(I&&C.parentElement){B(C.parentElement,true,true,g.position.INSIDE)}}};s.startDrag=function(D,C,A,B){var F=C[0]+A/2;var E=C[1]+B/2;var z=F-D.pageX;var y=E-D.pageY;s.updateGeometry(p);o=null;n=z;l=y;f("").bind("mousemove.fluid-dropManager",s.mouseMove)};s.lastPosition=function(){return o};s.endDrag=function(){f("").unbind("mousemove.fluid-dropManager")};s.mouseMove=function(A){var z=A.pageX+n;var C=A.pageY+l;var B=s.closestTarget(z,C,o);if(B&&B!==g.dropManager.NO_CHANGE){o=B;s.dropChangeFirer.fire(B)}};s.dropChangeFirer=g.event.getEventFirer();var w={element:null};s.closestTarget=function(I,G,D){var C=Number.MAX_VALUE;var A=w;var z=Number.MAX_VALUE;var H=w;for(var F=0;F<t.length;++F){var E=t[F];if(E.clazz==="hidden"){continue}var B=g.geom.minPointRectangle(I,G,E.rect);if(E.clazz==="locked"){if(B<z){z=B;H=E}}else{if(B<C){C=B;A=E}if(B===0){break}}}if(!A){return A}if(z>=C){H=w}if(D&&D.position===A.position&&g.unwrap(D.element)===g.unwrap(A.element)&&g.unwrap(D.lockedelem)===g.unwrap(H.element)){return g.dropManager.NO_CHANGE}return{position:A.position,element:A.element,lockedelem:H.element}};s.projectFrom=function(B,D,C){s.updateGeometry(p);var A=m[u(B)];var z=g.geom.projectFrom(A.rect,D,t,C);if(!z.cacheelem){return null}var y=z.cacheelem.position;return{element:z.cacheelem.element,position:y?y:g.position.BEFORE}};function x(z,B,A){var C=g.directionSign(B);var y=f(A).index(z)+C;if(y<0){y+=A.length}y%=A.length;return A[y]}s.logicalFrom=function(z,B,A){var y=s.getOwningSpan(z,g.position.INTERLEAVED,A);return{element:x(z,B,y),position:g.position.REPLACE}};s.lockedWrapFrom=function(A,E,D){var C=s.logicalFrom(A,E,D);var y=s.getOwningSpan(A,g.position.INTERLEAVED,D);var B=m[u(A)].owner.elements;if(D||y[0]===B[0]){return C}var z=x(A,E,B);if(p.elementMapper(z)==="locked"){C.element=null;C.clazz="locked"}return C};s.getOwningSpan=function(A,z,C){var y=m[u(A)].owner;var B=z===g.position.INSIDE?[y.parentElement]:y.elements;if(!C&&p.elementMapper){B=f.makeArray(B);g.remove_if(B,function(D){return p.elementMapper(D)==="locked"})}return B};s.geometricMove=function(B,C,y){var z=s.getOwningSpan(B,null,true);var A=s.getOwningSpan(C,y,true);g.permuteDom(B,C,y,z,A)};return s};g.dropManager.NO_CHANGE="no change";g.geom=g.geom||{};g.geom.minPointRectangle=function(l,p,o){var n=l<o.left?(o.left-l):(l>o.right?(l-o.right):0);var m=p<o.top?(o.top-p):(p>o.bottom?(p-o.bottom):0);return n*n+m*m};g.geom.minRectRect=function(o,m){var n=o.right<m.left?m.left-o.right:m.right<o.left?o.left-m.right:0;var l=o.bottom<m.top?m.top-o.bottom:m.bottom<o.top?o.top-m.bottom:0;return n*n+l*l};var a=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};g.geom.projectFrom=function(p,B,C,v){var n=g.directionAxis(B);var y=g.rectSides[B];var w=g.rectSides[n*15+5-B];var s=g.directionSign(B);var l={left:(7*p.left+1*p.right)/8,right:(5*p.left+3*p.right)/8,top:(7*p.top+1*p.bottom)/8,bottom:(5*p.top+3*p.bottom)/8};l[y]=s*c;l[w]=-l[y];function D(H,F,I){var G=F.rect;var J=g.geom.minRectRect(l,G);var E=-s*I*(p[I===1?y:w]-G[I===1?w:y]);if(J<=H.mindist&&E>=0){if(J==H.mindist&&E*I>H.minrdist){return}H.minrdist=E*I;H.mindist=J;H.minelem=F}}var t=a();var x=a();var o=a();for(var z=0;z<C.length;++z){var A=C[z];var m=A.owner&&A.element===A.owner.parentElement;if(A.clazz==="hidden"||v&&m){continue}else{if(!v&&A.clazz==="locked"){D(o,A,1)}else{D(t,A,1);D(x,A,-1)}}}var r=!t.minelem||x.mindist<t.mindist;var u=r?x:t;var q={wrapped:r,cacheelem:u.minelem};if(o.mindist<u.mindist){q.lockedelem=o.minelem}return q}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(c,d){var b=function(p,m,n){var o=c(p).clone();d.dom.iterateDom(o.get(0),function(q){if(q.tagName.toLowerCase()==="script"){return true}q.removeAttribute("id");if(q.tagName.toLowerCase()==="input"){q.setAttribute("disabled","disabled")}});o.removeAttr("id");o.removeClass("ui-droppable");o.addClass(m);if(n){var l=c(document.createElement("div"));l.append(o);l.append(n);o=l}c("body").append(o);if(!c.browser.safari){o.css("display","block").width(p.offsetWidth).height(p.offsetHeight)}if(c.browser.opera){o.hide()}return o};function f(m){var l=m.dom.fastLocate("selectables");if(l.length<=0){return null}return l[0]}function g(m,o,p,l){var n=o;var q=false;if(c.browser.msie){m[0].ondrag=function(){return false};m[0].onselectstart=function(){return false}}if(c.browser.opera){m.keypress(function(r){if(q){q=false;r.preventDefault();return false}});n=function(s){var r=o(s);if(r===false){q=true}}}m.keydown(n);m.keyup(p)}function k(l){var m=l.dom.fastLocate("selectables")[0];if(m){l.container.ariaState("activedescendent",m.id)}l.container.ariaRole(l.options.containerRole.container);l.container.ariaState("multiselectable","false");l.container.ariaState("readonly","false");l.container.ariaState("disabled","false")}function a(l){return l+"_avatar"}var j=function(l){if(l.keysets&&!(l.keysets instanceof Array)){l.keysets=[l.keysets]}};d.reorderer=function(A,n){if(!A){d.fail("Reorderer initialised with no container")}var B=d.initView("fluid.reorderer",A,n);n=B.options;var u=d.dropManager();B.layoutHandler=d.initSubcomponent(B,"layoutHandler",[A,n,u,B.dom]);B.activeItem=undefined;j(n);var l=B.locate("dropWarning");var y;if(l){y=l.clone()}var D=function(G){var I=n.keysets;for(var H=0;H<I.length;H++){if(I[H].modifier(G)){return true}}return false};var m=function(){return c.inArray(B.activeItem,B.dom.fastLocate("movables"))>=0};var o=function(G){B.dom.fastLocate("dropTargets").ariaState("dropeffect",G)};var v=n.styles;var w=function(G){return(!G.ctrlKey&&!G.altKey&&!G.shiftKey&&!G.metaKey)};var E=function(N){var P=B.activeItem;if(!P){return true}var G=n.keysets;for(var J=0;J<G.length;J++){var I=G[J];var Q=false;var M=d.findKeyInObject(I,N.keyCode);if(!M){continue}var O=I.modifier(N);var H=d.keycodeDirection[M];var K=B.layoutHandler.getRelativePosition(P,H,!O);if(!K){continue}if(O){var L=B.events.onBeginMove.fire(P);if(L){return false}if(l.length>0){if(K.clazz==="locked"){B.events.onShowKeyboardDropWarning.fire(P,l);l.show()}else{l.hide()}}if(K.element){B.requestMovement(K,P)}}else{if(w(N)){c(K.element).focus()}}return false}return true};B.handleKeyDown=function(G){if(!B.activeItem||B.activeItem!==G.target){return true}var H=c(B.activeItem);if(!H.hasClass(v.dragging)&&D(G)){if(m()){H.removeClass(v.selected);H.addClass(v.dragging);H.ariaState("grab","true");o("move")}return false}return E(G)};B.handleKeyUp=function(G){if(!B.activeItem||B.activeItem!==G.target){return true}var H=c(B.activeItem);if(H.hasClass(v.dragging)&&!D(G)){if(l){l.hide()}H.removeClass(v.dragging);H.addClass(v.selected);H.ariaState("grab","supported");o("none");return false}return false};var p;var q=function(H){var G=c(document.createElement(H));G.addClass(n.styles.dropMarker);G.hide();return G};d.logEnabled=true;B.requestMovement=function(H,G){if(!H||d.unwrap(H.element)===d.unwrap(G)){return}B.events.onMove.fire(G,H);u.geometricMove(G,H.element,H.position);c(B.activeItem).focus();B.refresh();u.updateGeometry(B.layoutHandler.getGeometricInfo());B.events.afterMove.fire(G,H,B.dom.fastLocate("movables"))};var z=function(G,H){B.dom.fastLocate("grabHandle",G)[H?"addClass":"removeClass"](v.hover)};function t(I){var H=n.styles;I.ariaState("grab","supported");I.mouseover(function(){B.events.onHover.fire(I,true)});I.mouseout(function(){B.events.onHover.fire(I,false)});var G;B.dom.fastLocate("grabHandle",I).draggable({refreshPositions:false,scroll:true,helper:function(){var J;if(y){J=y[0]}G=c(n.avatarCreator(I[0],H.avatar,J));G.attr("id",a(B.container.id));return G},start:function(P,O){var K=B.events.onBeginMove.fire(I);if(K){return false}var N=B.dom.fastLocate("grabHandle",I)[0];var M=d.dom.computeAbsolutePosition(N);var J=N.offsetWidth;var L=N.offsetHeight;I.focus();I.removeClass(n.styles.selected);I.addClass(n.styles.mouseDrag);I.ariaState("grab","true");o("move");u.startDrag(P,M,J,L);G.show()},stop:function(L,K){I.removeClass(n.styles.mouseDrag);I.addClass(n.styles.selected);c(B.activeItem).ariaState("grab","supported");var J=d.unwrap(p);if(J.parentNode){J.parentNode.removeChild(J)}G.hide();K.helper=null;o("none");u.endDrag();B.requestMovement(u.lastPosition(),I);B.activeItem.focus()},handle:B.dom.fastLocate("grabHandle",I)})}function F(G,H){G.removeClass(H.selected);G.removeClass(H.dragging);G.addClass(H.defaultStyle);G.ariaState("selected","false")}var s=function(I){B.events.onSelect.fire(I);var H=n.styles;if(B.activeItem&&B.activeItem!==I){F(c(B.activeItem),H)}B.activeItem=I;var G=c(I);G.removeClass(H.defaultStyle);G.addClass(H.selected);G.ariaState("selected","true");B.container.ariaState("activedescendent",I.id)};var C=function(){var J=function(L){F(c(this),n.styles);return L.stopPropagation()};var K=function(L){s(this);return L.stopPropagation()};var G=B.dom.fastLocate("selectables");for(var I=0;I<G.length;++I){var H=c(G[I]);if(!c.data(H[0],"fluid.reorderer.selectable-initialised")){H.addClass(v.defaultStyle);G.blur(J);G.focus(K);G.click(function(L){var M=d.unwrap(B.dom.fastLocate("grabHandle",this));if(d.dom.isContainer(M,L.target)){c(this).focus()}});G.ariaRole(n.containerRole.item);G.ariaState("selected","false");G.ariaState("disabled","false");c.data(c.data(H[0],"fluid.reorderer.selectable-initialised",true))}}if(!B.selectableContext){B.selectableContext=d.selectable(B.container,{selectableElements:G,selectablesTabindex:B.options.selectablesTabindex,direction:null})}};var x=function(G){d.moveDom(p,G.element,G.position);p.css("display","");if(y){if(G.lockedelem){y.show()}else{y.hide()}}};var r=function(){var J=B.dom.fastLocate("movables");var I=B.dom.fastLocate("dropTargets");
C();for(var G=0;G<J.length;G++){var H=J[G];if(!c.data(H,"fluid.reorderer.movable-initialised")){t(c(H));c.data(H,"fluid.reorderer.movable-initialised",true)}}if(J.length>0&&!p){p=q(J[0].tagName)}u.updateGeometry(B.layoutHandler.getGeometricInfo());u.dropChangeFirer.addListener(x,"fluid.Reorderer");I.ariaState("dropeffect","none")};if(B.container){g(B.container,B.handleKeyDown,B.handleKeyUp);k(B);d.tabbable(B.container);r()}if(n.afterMoveCallbackUrl){B.events.afterMove.addListener(function(){var G=B.layoutHandler;var H=G.getModel?G.getModel():n.acquireModel(B);c.post(n.afterMoveCallbackUrl,JSON.stringify(H))},"postModel")}B.events.onHover.addListener(z,"style");B.refresh=function(){B.dom.refresh("movables");B.dom.refresh("selectables");B.dom.refresh("grabHandle",B.dom.fastLocate("movables"));B.dom.refresh("stylisticOffset",B.dom.fastLocate("movables"));B.dom.refresh("dropTargets");B.events.onRefresh.fire();r();B.selectableContext.selectables=B.dom.fastLocate("selectables");B.selectableContext.selectablesUpdated(B.activeItem)};B.refresh();return B};d.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};d.reorderer.defaultKeysets=[{modifier:function(l){return l.ctrlKey},up:d.reorderer.keys.UP,down:d.reorderer.keys.DOWN,right:d.reorderer.keys.RIGHT,left:d.reorderer.keys.LEFT},{modifier:function(l){return l.ctrlKey},up:d.reorderer.keys.i,down:d.reorderer.keys.m,right:d.reorderer.keys.k,left:d.reorderer.keys.j}];d.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var e=function(l,m,n){n=n||{};n.layoutHandler=m;return d.reorderer(l,n)};d.reorderList=function(l,m){return e(l,"fluid.listLayoutHandler",m)};d.reorderGrid=function(l,m){return e(l,"fluid.gridLayoutHandler",m)};d.reorderer.GEOMETRIC_STRATEGY="projectFrom";d.reorderer.LOGICAL_STRATEGY="logicalFrom";d.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";d.reorderer.NO_STRATEGY=null;d.reorderer.relativeInfoGetter=function(m,o,n,l,p){return function(r,t,q){var s=d.directionOrientation(t);var u=s===m?o:n;return u!==null?l[u](r,t,q):null}};d.defaults("fluid.reorderer",{styles:{defaultStyle:"orderable-default",selected:"orderable-selected",dragging:"orderable-dragging",mouseDrag:"orderable-dragging",hover:"orderable-hover",dropMarker:"orderable-drop-marker",avatar:"orderable-avatar"},selectors:{dropWarning:".drop-warning",movables:".movables",grabHandle:"",stylisticOffset:""},avatarCreator:b,keysets:d.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function h(l,n,m){return function(){return{sentinelize:n,extents:[{orientation:l,elements:m.fastLocate("dropTargets")}],elementMapper:function(o){return c.inArray(o,m.fastLocate("movables"))===-1?"locked":null}}}}d.defaults(true,"fluid.listLayoutHandler",{orientation:d.orientation.VERTICAL,containerRole:d.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});d.listLayoutHandler=function(m,n,l,p){var o={};o.getRelativePosition=d.reorderer.relativeInfoGetter(n.orientation,d.reorderer.LOGICAL_STRATEGY,null,l,p);o.getGeometricInfo=h(n.orientation,n.sentinelize,p);return o};d.defaults(true,"fluid.gridLayoutHandler",{orientation:d.orientation.HORIZONTAL,containerRole:d.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});d.gridLayoutHandler=function(m,n,l,p){var o={};o.getRelativePosition=d.reorderer.relativeInfoGetter(n.orientation,d.reorderer.LOGICAL_STRATEGY,d.reorderer.GEOMETRIC_STRATEGY,l,p);o.getGeometricInfo=h(n.orientation,n.sentinelize,p);return o}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};fluid.moduleLayout=fluid.moduleLayout||{};(function(c,b){var e=function(g,f){return b.find(f.columns,function(k,j){var h=c.inArray(g,k.elements);return h===-1?null:{columnIndex:j,itemIndex:h}},{columnIndex:-1,itemIndex:-1})};var a=function(g,f){return b.find(f.columns,function(j,h){return g===j.container?h:null},-1)};b.moduleLayout.updateLayout=function(j,l,g,h){j=b.unwrap(j);l=b.unwrap(l);var f=e(j,h);h.columns[f.columnIndex].elements.splice(f.itemIndex,1);var n;if(g===b.position.INSIDE){n=h.columns[a(l,h)].elements;n.splice(n.length,0,j)}else{var m=e(l,h);n=h.columns[m.columnIndex].elements;g=b.normalisePosition(g,f.columnIndex===m.columnIndex,m.itemIndex,f.itemIndex);var k=g===b.position.BEFORE?0:1;n.splice(m.itemIndex+k,0,j)}};b.moduleLayout.layoutFromFlat=function(f,h,g){var j={};j.container=f;j.columns=b.transform(h,function(k){return{container:k,elements:c.makeArray(g.filter(function(){return b.dom.isContainer(k,this)}))}});return j};b.moduleLayout.layoutFromIds=function(f){return{container:b.byId(f.id),columns:b.transform(f.columns,function(g){return{container:b.byId(g.id),elements:b.transform(g.children,b.byId)}})}};b.moduleLayout.layoutToIds=function(f){return{id:b.getId(f.container),columns:b.transform(f.columns,function(g){return{id:b.getId(g.container),children:b.transform(g.elements,b.getId)}})}};var d=function(g,f){if(f){var h=c(g).offset();f=c(f);f.css("position","absolute");f.css("top",h.top);f.css("left",h.left)}};b.defaults(true,"fluid.moduleLayoutHandler",{orientation:b.orientation.VERTICAL,containerRole:b.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});b.moduleLayoutHandler=function(g,o,k,h){var l={};function n(){var q;if(o.selectors.modules){q=b.moduleLayout.layoutFromFlat(g,h.locate("columns"),h.locate("modules"))}if(!q){var p=b.model.getBeanValue(o,"moduleLayout.layout");b.moduleLayout.layoutFromIds(p)}return q}var j=n();l.layout=j;function f(p){var q=o.selectors.lockedModules?h.fastLocate("lockedModules"):[];return c.inArray(p,q)!==-1}l.getRelativePosition=b.reorderer.relativeInfoGetter(o.orientation,b.reorderer.WRAP_LOCKED_STRATEGY,b.reorderer.GEOMETRIC_STRATEGY,k,h);l.getGeometricInfo=function(){var t=[];var s={extents:t,sentinelize:o.sentinelize};s.elementMapper=function(u){return f(u)?"locked":null};for(var p=0;p<j.columns.length;p++){var r=j.columns[p];var q={orientation:o.orientation,elements:c.makeArray(r.elements),parentElement:r.container};t.push(q)}return s};function m(p){return function(){var q=b.accumulate(j.columns,function(r,s){return s.concat(r.elements)},[]);if(!p){b.remove_if(q,f)}return q}}l.returnedOptions={selectors:{movables:m(false),dropTargets:m(false),selectables:m(true)},listeners:{onMove:function(p,q){b.moduleLayout.updateLayout(p,q.element,q.position,j)},onRefresh:function(){j=n();l.layout=j},"onShowKeyboardDropWarning.setPosition":d}};l.getModel=function(){return b.moduleLayout.layoutToIds(j)};return l}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(b,a){a.reorderLayout=function(c,f){var e={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".columns",modules:".modules"}};var d=b.extend(true,e,f);return a.reorderer(c,d)}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(e,d){var a=function(j,k){return j+"lightbox-cell:"+k+":"};var h=function(k){var j=function(l){if(l.which===d.reorderer.keys.ENTER){var m=e("a",l.target);document.location=m.attr("href")}};e(k).keypress(j)};var c=function(n,p,l){var j=n.getElementsByTagName(p);var o=[];for(var m=0;m<j.length;m+=1){var k=j[m];var q=k.id;if(q&&q.match(l)){o.push(k)}}return o};var f=function(j,k){var l="^"+a(k,"[0-9]+")+"$";return function(){return c(j,"div",l)}};var b=function(j){while(j){if(j.nodeName.toLowerCase()==="form"){return j}j=j.parentNode}};var g=function(k){var j=b(k);return function(){var l,m;l=c(j,"input","^"+a(k.id,"[^:]*")+"reorder-index$");for(m=0;m<l.length;m+=1){l[m].value=m}if(j&&j.action){e.post(j.action,e(j).serialize(),function(o,p,n){})}}};d.reorderImages=function(k,l){var n,m,j,o;l=l||{};k=d.container(k);d.tabindex(e("a",k),-1);h(k);n=d.unwrap(k);m=l.afterMoveCallback||g(n);j=(l.selectors&&l.selectors.movables)||f(n,n.id);o={layoutHandler:"fluid.gridLayoutHandler",afterMoveCallback:m,selectors:{movables:j}};e.extend(true,o,l);return d.reorderer(k,o)};d.lightbox=d.reorderImages})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(h,f){var d="state_initial",c="state_changed",b="state_reverted";function g(m,k){var j="<span class='fluid-undo'><span class='undoContainer'>[<a href='#' class='undoControl'>undo</a>]</span><span class='redoContainer'>[<a href='#' class='redoControl'>redo</a>]</span></span>";var l=h(j);k.append(l);return l}function a(j){if(j.state===d){j.locate("undoContainer").hide();j.locate("redoContainer").hide()}else{if(j.state===c){j.locate("undoContainer").show();j.locate("redoContainer").hide()}else{if(j.state===b){j.locate("undoContainer").hide();j.locate("redoContainer").show()}}}}var e=function(j){j.locate("undoControl").click(function(){if(j.state!==b){f.model.copyModel(j.extremalModel,j.component.model);j.component.updateModel(j.initialModel.value,j);j.state=b;a(j);j.locate("redoControl").focus()}return false});j.locate("redoControl").click(function(){if(j.state!==c){j.component.updateModel(j.extremalModel.value,j);j.state=c;a(j);j.locate("undoControl").focus()}return false});return{modelChanged:function(k,m,l){if(l!==j){j.state=c;f.model.copyModel(j.initialModel,m);a(j)}}}};f.undoDecorator=function(j,m){var l=f.initView("undo",null,m);l.container=l.options.renderer(l,j.container);f.initDomBinder(l);f.tabindex(l.locate("undoControl"),0);f.tabindex(l.locate("redoControl"),0);l.component=j;l.initialModel={};l.extremalModel={};f.model.copyModel(l.initialModel,j.model);f.model.copyModel(l.extremalModel,j.model);l.state=d;a(l);var k=e(l);l.returnedOptions={listeners:k};return l};f.defaults("undo",{selectors:{undoContainer:".undoContainer",undoControl:".undoControl",redoContainer:".redoContainer",redoControl:".redoControl"},renderer:g})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(j,l){var v=function(G){if(G.setSelectionRange){G.focus();
G.setSelectionRange(0,0)}else{if(G.createTextRange){var F=G.createTextRange();F.collapse(true);F.select()}}};function o(J,I,F,H){var G=document.createEvent("KeyEvents");G.initKeyEvent(I,1,1,null,0,0,0,0,F,H);J.dispatchEvent(G)}l.setCaretToEnd=function(I,G){var J=G?G.length:0;try{I.focus();if(I.setSelectionRange){I.setSelectionRange(J,J);if(j.browser.mozilla&&J>0){o(I,"keypress",92,92);o(I,"keydown",8,0);o(I,"keypress",8,0)}}else{if(I.createTextRange){var F=I.createTextRange();F.move("character",J);F.select()}}}catch(H){}};l.deadMansBlur=function(J,G,I){var F=false;j(J).blur(function(){F=true;setTimeout(function(){if(F){I(J)}},150)});var H=function(){F=false};G.focus(H);G.click(H)};var q=function(G){z(G,false);var F=G.viewEl;var H=G.displayView.value();G.updateModel(H===G.options.defaultViewText?"":H);if(G.options.applyEditPadding){G.editField.width(Math.max(F.width()+G.options.paddings.edit,G.options.paddings.minimumEdit))}F.removeClass(G.options.styles.invitation);F.removeClass(G.options.styles.focus);F.hide();G.editContainer.show();if(G.tooltipEnabled()){j("#"+G.options.tooltipId).hide()}setTimeout(function(){G.editField.focus();l.setCaretToEnd(G.editField[0],G.editView.value());if(G.options.selectOnEdit){G.editField[0].select()}},0);G.events.afterBeginEdit.fire()};var s=function(J){var K=J.editView.value();var H=J.model.value;var F=J.viewEl[0];var I=J.editField[0];var G=J.events.onFinishEdit.fire(K,H,I,F);if(G){return}J.updateModel(K);J.events.afterFinishEdit.fire(K,H,I,F);m(J)};var e=function(F){if(F.isEditing()){F.editView.value(F.model.value);m(F)}};var m=function(F){F.editContainer.hide();F.viewEl.show()};var C=function(G,F,H){G.removeClass(F);G.css("padding-right",H)};var u=function(F){F.displayView.value(F.options.defaultViewText);F.viewEl.css("padding-right",F.existingPadding);F.viewEl.addClass(F.options.styles.defaultViewStyle)};var A=function(F){F.displayView.value("");if(j.browser.msie){if(F.viewEl.css("display")==="inline"){F.viewEl.css("display","inline-block")}}};var p=function(F){F.displayView.value(F.model.value);C(F.viewEl,F.options.styles.defaultViewStyle,F.existingPadding)};var t=function(F,G){F.displayView.refreshView(F,G);if(F.editView){F.editView.refreshView(F,G)}};var B=function(F,G){F.model.value=G;F.refreshView()};var a=function(F,H,G){if(F.model.value!==H){var I=j.extend(true,{},F.model);F.model.value=H;F.events.modelChanged.fire(F.model,I,G);F.refreshView(G)}};var w=function(G,I){var H=function(J){G.addClass(I)};var F=function(J){G.removeClass(I)};G.hover(H,F)};var E=function(F){return function(){var G=F.events.onBeginEdit.fire();if(G){return true}q(F);return false}};function h(G){var F=l.unwrap(G.viewEl);return function(I){var H=l.findAncestor(I.target,function(J){if(/input|select|textarea|button|a/i.test(J.nodeName)||J==F){return true}});if(H===F){G.edit();return false}}}var D=function(G){w(G.viewEl,G.options.styles.invitation);var F=l.unwrap(G.viewEl);G.viewEl.click(h(G))};var b=function(H,F,I){var J=function(){H.addClass(F);H.addClass(I)};var G=function(){H.removeClass(F);H.removeClass(I)};H.focus(J);H.blur(G)};var n=function(G){l.tabbable(G.viewEl);var F=h(G);l.activatable(G.viewEl,function(I,H){return F(H)})};var y=function(H){if(H.options.submitOnEnter===undefined){H.options.submitOnEnter="textarea"!==l.unwrap(H.editField).nodeName.toLowerCase()}function I(J){return J.keyCode?J.keyCode:(J.which?J.which:0)}var F=function(J){var K=I(J);if(K===l.a11y.keys.ESC){e(H);return false}};var G=function(J){var K=I(J);if(K!==l.a11y.keys.ENTER){return true}s(H);H.viewEl.focus();return false};if(H.options.submitOnEnter){H.editContainer.keypress(G)}H.editContainer.keydown(F)};var g=function(F){if(F.options.blurHandlerBinder){F.options.blurHandlerBinder(F)}else{var G=function(H){s(F);return false};F.editField.blur(G)}};var f=function(F,G){F.ariaRole("button")};var d=function(G,H){G.editContainer=G.locate("editContainer");G.editField=G.locate("edit");if(G.editContainer.length!==1){if(G.editField.length===1){G.editContainer=G.editField}else{if(G.editContainer.length>1){l.fail("InlineEdit did not find a unique container for selector "+G.options.selectors.editContainer+": "+l.dumpEl(G.editContainer))}}}if(G.editContainer.length===1&&!G.editField){G.editField=G.locate("edit",G.editContainer)}if(!H){return}var F=G.options.editModeRenderer(G);if(F){G.editContainer=F.container;G.editField=F.field}if(G.editField.length===0){l.fail("InlineEdit improperly initialised - editField could not be located (selector "+G.options.selectors.edit+")")}};var x=function(J){if(J.editContainer.length>0&&J.editField.length>0){return{container:J.editContainer,field:J.editField}}var G="<span><input type='text' class='edit'/></span>";var L=j(G);var F=j("input",L);var I=J.container.attr("id");if(I){var K=I+"-edit-container";var H=I+"-edit";L.attr("id",K);F.attr("id",H)}J.viewEl.after(L);return{container:L,field:F}};var z=function(G,F){if(!G.editInitialized){d(G,!G.options.lazyEditView||!F);if(!G.options.lazyEditView||!F){G.editView=l.initSubcomponent(G,"editView",G.editField);j.extend(true,G.editView,l.initSubcomponent(G,"editAccessor",G.editField));y(G);g(G);G.editView.refreshView(G);G.editInitialized=true}}};var r=function(G){var F=false;G.events.onBeginEdit.addListener(function(){F=true});G.events.afterFinishEdit.addListener(function(){F=false});return function(){return F}};var c=function(F,G){var H=G.viewEl.css("padding-right");G.existingPadding=H?parseFloat(H):0;B(G,G.displayView.value());D(G);n(G);b(G.viewEl,G.options.styles.focus,G.options.styles.invitation);f(G.viewEl);if(G.editContainer){G.editContainer.hide()}var I=function(){if(G.tooltipEnabled()){G.viewEl.tooltip({delay:G.options.tooltipDelay,extraClass:G.options.styles.tooltip,bodyHandler:function(){return G.options.tooltipText},id:G.options.tooltipId})}};j(I);G.decorators=l.initSubcomponents(G,"componentDecorators",[G,l.COMPONENT_OPTIONS])};var k=function(H,F){var G=[];H.each(function(I,J){G.push(l.inlineEdit(j(J),F))});return G};l.inlineEdit=function(F,H){var G=l.initView("inlineEdit",F,H);G.viewEl=G.locate("text");G.displayView=l.initSubcomponent(G,"displayView",G.viewEl);j.extend(true,G.displayView,l.initSubcomponent(G,"displayAccessor",G.viewEl));G.model={value:""};G.edit=E(G);G.isEditing=r(G);G.finish=function(){s(G)};G.cancel=function(){e(G)};G.tooltipEnabled=function(){return G.options.useTooltip&&j.fn.tooltip};G.refreshView=function(I){t(G,I)};G.updateModel=function(J,I){a(G,J,I)};z(G,true);c(F,G);return G};l.inlineEdit.standardAccessor=function(F){var H=F.nodeName.toLowerCase();var G="input"===H||"textarea"===H?"val":"text";return{value:function(I){return j(F)[G](I)}}};l.inlineEdit.richTextViewAccessor=function(F){return{value:function(G){return j(F).html(G)}}};l.inlineEdit.standardDisplayView=function(G){var F={refreshView:function(H,I){if(H.model.value){p(H)}else{if(H.options.defaultViewText){u(H)}else{A(H)}}if((j.trim(H.viewEl.text()).length===0)&&(H.existingPadding<H.options.paddings.minimumView)){H.viewEl.css("padding-right",H.options.paddings.minimumView)}}};return F};l.inlineEdit.standardEditView=function(F){var G={refreshView:function(H,I){if(H.editField&&H.editField.index(I)===-1){H.editView.value(H.model.value)}}};j.extend(true,G,l.inlineEdit.standardAccessor(F));return G};l.inlineEdits=function(G,H){H=H||{};var I=j.extend({},l.defaults("inlineEdits").selectors,H.selectors);var F=l.container(G);var J=j(I.editables,F);return k(J,H)};l.defaults("inlineEdit",{selectors:{text:".text",editContainer:".editContainer",edit:".edit"},styles:{invitation:"inlineEdit-invitation",defaultViewStyle:"inlineEdit-invitation-text",tooltip:"inlineEdit-tooltip",focus:"inlineEdit-focus"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},editModeRenderer:x,lazyEditView:false,defaultViewText:"Click here to edit",tooltipText:"Click item to edit",tooltipId:"tooltip",useTooltip:false,tooltipDelay:2000,selectOnEdit:false});l.defaults("inlineEdits",{selectors:{editables:".inlineEditable"}})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(c,b){var a=function(g,d,e){var f=c.extend({},b.defaults(g),e);return b.inlineEdit(d,f)};b.inlineEdit.tinyMCE=function(d,e){return a("fluid.inlineEdit.tinyMCE",d,e)};b.inlineEdit.tinyMCE.viewAccessor=function(d){return{value:function(f){var e=tinyMCE.get(d.id);if(!e){return""}if(f){c(d).val(f);e.setContent(f,{format:"raw"})}else{return e.getContent()}}}};b.inlineEdit.tinyMCE.blurHandlerBinder=function(d){function e(f){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,d.editField[0].id);if(c.browser.mozilla&&c.browser.version.substring(0,3)==="1.8"){return}f.selection.select(f.getBody(),1);f.selection.collapse(0)},10)}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.getBody();b.deadMansBlur(d.editField,c(g),function(){d.cancel()})});d.events.afterBeginEdit.addListener(function(){var f=tinyMCE.get(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.tinyMCE.editModeRenderer=function(g){var d={mode:"exact",theme:"simple"};var f=c.extend(true,d,g.options.tinyMCE);f.elements=b.allocateSimpleId(g.editField);var e=f.init_instance_callback;f.init_instance_callback=function(h){g.events.afterInitEdit.fire(h);if(e){e()}};tinyMCE.init(f)};b.defaults("fluid.inlineEdit.tinyMCE",{useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.tinyMCE.blurHandlerBinder,editModeRenderer:b.inlineEdit.tinyMCE.editModeRenderer});b.inlineEdit.FCKEditor=function(d,e){return a("fluid.inlineEdit.FCKEditor",d,e)
};b.inlineEdit.FCKEditor.complete=b.event.getEventFirer();b.inlineEdit.FCKEditor.complete.addListener(function(e){var d=e.LinkedField;var f=c.data(d,"fluid.inlineEdit.FCKEditor");f.events.afterInitEdit.fire(e)});b.inlineEdit.FCKEditor.blurHandlerBinder=function(d){function e(f){f.Focus()}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.EditingArea.TargetElement});d.events.afterBeginEdit.addListener(function(){var f=b.inlineEdit.FCKEditor.byId(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.FCKEditor.byId=function(e){var d=typeof(FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(e);return d};b.inlineEdit.FCKEditor.editModeRenderer=function(e){var f=b.allocateSimpleId(e.editField);c.data(b.unwrap(e.editField),"fluid.inlineEdit.FCKEditor",e);var d=new FCKeditor(f);d.BasePath="fckeditor/";c.extend(true,d.Config,e.options.FCKEditor);c.extend(true,d,e.options.FCKEditor);d.Config.fluidInstance=e;d.ReplaceTextarea()};b.inlineEdit.FCKEditor.viewAccessor=function(d){return{value:function(f){var e=b.inlineEdit.FCKEditor.byId(d.id);if(!e){if(f){c(d).val(f)}return""}if(f){e.SetHTML(f)}else{return e.GetHTML()}}}};b.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.FCKEditor.blurHandlerBinder,editModeRenderer:b.inlineEdit.FCKEditor.editModeRenderer});b.inlineEdit.dropdown=function(d,e){return a("fluid.inlineEdit.dropdown",d,e)};b.inlineEdit.dropdown.editModeRenderer=function(d){var e=b.allocateSimpleId(d.editField);d.editField.selectbox({finishHandler:function(){d.finish()}});return{container:d.editContainer,field:c("input.selectbox",d.editContainer)}};b.inlineEdit.dropdown.blurHandlerBinder=function(d){b.deadMansBlur(d.editField,c("div.selectbox-wrapper li",d.editContainer),function(){d.cancel()})};b.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:b.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:b.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_0_8);function FCKeditor_OnComplete(a){fluid.inlineEdit.FCKEditor.complete.fire(a)}fluid_0_8=fluid_0_8||{};(function(d,g){function r(w,x,z){if(!w.pageLinks){return}if(z.pageIndex!==undefined){var y=w.pageLinks.eq(z.pageIndex);y.removeClass(w.options.styles.currentPage)}var v=w.pageLinks.eq(x.pageIndex);v.addClass(w.options.styles.currentPage)}function j(w,v,x){w.unbind("click.fluid.pager");w.bind("click.fluid.pager",function(){v.initiatePageChange.fire(x)})}function b(v){v.pageCount=Math.max(1,Math.floor((v.totalRange-1)/v.pageSize)+1)}function l(v){return Math.min(v.totalRange,(v.pageIndex+1)*v.pageSize)}g.pager=function(){return g.pagerImpl.apply(null,arguments)};g.pager.directPageList=function(v,z,x){var A=g.initView("fluid.pager.directPageList",v,x);A.pageLinks=A.locate("pageLinks");for(var y=0;y<A.pageLinks.length;++y){var w=A.pageLinks.eq(y);j(w,z,{pageIndex:y})}z.onModelChange.addListener(function(B,C){r(A,B,C)});A.defaultModel={pageIndex:undefined,pageSize:1,totalRange:A.pageLinks.length};return A};g.iota=function(x,y){y=y|0;var w=[];for(var v=0;v<x;++v){w[w.length]=y++}return w};g.pager.everyPageStrategy=g.iota;g.pager.gappedPageStrategy=function(v,w){if(!v){v=3}if(!w){w=v}return function(C,D,y){var B=[];var x=0;var A=false;for(var z=0;z<C;++z){if(z<v||(C-z-1)<v||(z>=y-w&&z<=y+w)){B[x++]=z;A=false}else{if(!A){B[x++]=-1;A=true}}}return B}};g.pager.renderedPageList=function(v,D,x,E,C){E=d.extend(true,x,E);var z=g.initView("fluid.pager.renderedPageList",v,E);E=z.options;var w={cutpoints:[{id:"page-link:link",selector:x.selectors.pageLinks},{id:"page-link:skip",selector:x.selectors.pageLinkSkip},{id:"page-link:disabled",selector:x.selectors.pageLinkDisabled}]};if(E.linkBody){w.cutpoints[w.cutpoints.length]={id:"payload-component",selector:E.linkBody}}function y(F){return function(G){return G===-1?{ID:"page-link:skip"}:{ID:G===F?"page-link:link":"page-link:link",value:G+1,pageIndex:G,decorators:[{type:"jQuery",func:"click",args:function(){D.initiatePageChange.fire({pageIndex:G})}},{type:G===F?"addClass":"",classes:z.options.styles.currentPage}]}}}var A=z.locate("root");g.expectFilledSelector(A,"Error finding root template for fluid.pager.renderedPageList");var B=g.selfRender(A,{},w);D.onModelChange.addListener(function(G,I){var F=z.options.pageStrategy(G.pageCount,0,G.pageIndex);var H=g.transform(F,y(G.pageIndex));H[H.length-1].value=H[H.length-1].value+C.last;D.onRenderPageLinks.fire(H);g.reRender(B,A,H,w);r(z,G,I)});return z};g.defaults("fluid.pager.renderedPageList",{selectors:{root:".pager-links"},linkBody:"a",pageStrategy:g.pager.everyPageStrategy});var k=function(x,v,w){if(w.pageIndex===0){x.previous.addClass(v.styles.disabled)}else{x.previous.removeClass(v.styles.disabled)}if(w.pageIndex===w.pageCount-1){x.next.addClass(v.styles.disabled)}else{x.next.removeClass(v.styles.disabled)}};g.pager.previousNext=function(v,x,w){var y=g.initView("fluid.pager.previousNext",v,w);y.previous=y.locate("previous");j(y.previous,x,{relativePage:-1});y.next=y.locate("next");j(y.next,x,{relativePage:+1});x.onModelChange.addListener(function(z,B,A){k(y,w,z)});return y};g.pager.pagerBar=function(y,w,x,v){var z=g.initView("fluid.pager.pagerBar",w,x);z.pageList=g.initSubcomponent(z,"pageList",[w,y,z.options,g.COMPONENT_OPTIONS,v]);z.previousNext=g.initSubcomponent(z,"previousNext",[w,y,z.options,g.COMPONENT_OPTIONS,v]);return z};g.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".page-link",pageLinkSkip:".page-link-skip",pageLinkDisabled:".page-link-disabled",previous:".previous",next:".next"},styles:{currentPage:"current-page",disabled:"disabled"}});function a(v){return v.options.columnDefs}g.pager.findColumnDef=function(x,w){var v=d.grep(x,function(y){return y.key===w})[0];return v};function q(y,x,v){var w=(x.options.dataOffset?x.options.dataOffset+".":"");y.shortRoot=v;y.longRoot=w+y.shortRoot}g.pager.fetchValue=function(y,x,w,A,v){q(v,y,w);var z=e(A,v.shortRoot,v.longRoot);return g.model.getBeanValue(x,z)};g.pager.basicSorter=function(E,x){var B=E.options.dataModel;var D={};var y=a(E);var z=g.pager.findColumnDef(y,x.sortKey);var v=[];for(var w=0;w<x.totalRange;++w){v[w]={index:w,value:g.pager.fetchValue(E,B,w,z.valuebinding,D)}}var C=typeof v[0].value;function A(I,H){var G=I.value;var F=H.value;return G===F?0:(G>F?x.sortDir:-x.sortDir)}v.sort(A);return g.transform(v,function(F){return F.index})};g.pager.directModelFilter=function(y,x,A){var B=[];var v=l(x);for(var z=x.pageIndex*x.pageSize;z<v;++z){var w=A?A[z]:z;B[B.length]={index:w,row:y[w]}}return B};function e(w,x,v){if(w.charAt(0)==="*"){return v+w.substring(1)}else{return w.replace("*",x)}}function c(B,A){var z="";var w=0;while(true){var x=B.indexOf("${",w);if(x===-1){z+=B.substring(w);break}else{z+=B.substring(w,x);var v=B.indexOf("}",x+2);var y=B.substring(x+2,v);if(y==="VALUE"){y=A.EL}else{y=e(y,A.shortRoot,A.longRoot)}var C=g.model.getBeanValue(A.dataModel,y);z+=C;w=v+1}}return z}function t(x,v,w){for(i in v){var y=v[i];if(y===g.VALUE){if(i==="valuebinding"){x[i]=w.EL}else{x[i]={valuebinding:w.EL}}}else{if(i==="valuebinding"){x[i]=e(v[i],w)}else{if(typeof(y)==="object"){x[i]=y.length!==undefined?[]:{};t(x[i],y,w)}else{if(typeof(y)==="string"){x[i]=c(y,w)}else{x[i]=v[i]}}}}}return x}function s(x,B){var y=B.options;var A=x.valuebinding;var z=x.key;if(!A){g.fail("Error in definition for column with key "+z+": valuebinding is not set")}B.EL=e(A,B.shortRoot,B.longRoot);if(!z){var w=g.model.parseEL(A);z=w[w.length-1]}var v=(y.keyPrefix?y.keyPrefix:"")+z;return v}function m(w,x){var v=g.transform(x.columnDefs,function(z){var y=s(z,x);var A;if(!z.components){return{ID:y,valuebinding:x.EL}}else{if(typeof z.components==="function"){A=z.components(w.row,w.index)}else{A=z.components}}A=t({},A,x);A.ID=y;return A});return v}function u(v){return g.model.getBeanValue(v.options.dataModel,v.options.dataOffset)}function p(v,x){var A=x.options.renderOptions.idMap["header:"+v];var y=g.jById(A);if(y.length===0){return null}var z=x.overallOptions.selectors.headerSortStylisticOffset;var w=g.findAncestor(y,function(B){return d(B).is(z)});return w}function n(x,w,v){w=d(w);w.removeClass(x.ascendingHeader);w.removeClass(x.descendingHeader);if(v!==0){w.addClass(v===1?x.ascendingHeader:x.descendingHeader)}}function o(x,w){b(w);if(w.pageIndex>=w.pageCount){w.pageIndex=w.pageCount-1}if(w.pageIndex!==x.model.pageIndex||w.pageSize!==x.model.pageSize||w.sortKey!==x.model.sortKey||w.sortDir!==x.model.sortDir){var v=w.sortKey?x.options.sorter(x,w):null;x.permutation=v;x.events.onModelChange.fire(w,x.model,x);g.model.copyModel(x.model,w)}}function f(x,v,w){return function(){var y=x.model;var A=g.copy(y);var B=x.options.styles;var C=y.sortKey;if(v.key!==y.sortKey){A.sortKey=v.key;A.sortDir=1;var z=p(C,w);if(z){n(B,z,0)}}else{if(A.sortKey===v.key){A.sortDir=-1*A.sortDir}else{return false}}o(x,A);n(B,p(A.sortKey,w),A.sortDir);return false}}function h(x,v,y,w){return{children:g.transform(y,function(z){return{ID:s(z,w),value:z.label,decorators:[{jQuery:["click",f(x,z,w)]},{identify:"header:"+z.key}]}})}}g.pager.selfRender=function(D,w){var y=g.initView("fluid.pager.selfRender",D.container,w);var E=y.options;E.renderOptions.idMap=E.renderOptions.idMap||{};var C=E.renderOptions.idMap;var z=d(E.root);var B=g.selfRender(z,{},E.renderOptions);z.addClass("fl-components-pager");var x=a(D);var v={options:E,columnDefs:x,overallOptions:D.options,dataModel:D.options.dataModel,idMap:C};var A=u(D);return{returnedOptions:{listeners:{onModelChange:function(H,J){var G=D.options.modelFilter(A,H,D.permutation);var F=g.transform(G,function(K){var L=q(v,D,K.index);if(x==="explode"){return g.explode(K.row,z)}else{if(x.length){return m(K,v)}}});var I={};I[E.row]=F;if(typeof(x)==="object"){I[E.header]=h(D,H,x,v)}E.renderOptions=E.renderOptions||{};
E.renderOptions.model=v.dataModel;g.reRender(B,z,I,E.renderOptions)}}}}};g.defaults("fluid.pager.selfRender",{keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",renderOptions:{}});g.pager.summary=function(x,v){var w=x.locate("summary");return{returnedOptions:{listeners:{onModelChange:function(y,A){var z=g.stringTemplate(v.message,{first:y.pageIndex*y.pageSize+1,last:l(y),total:y.totalRange});if(w.length>0){w.text(z)}}}}}};g.pager.directPageSize=function(w){var v=w.locate("pageSize");if(v.length>0){w.events.onModelChange.addListener(function(x,y){if(v.val()!==x.pageSize){v.val(x.pageSize)}});v.change(function(){w.events.initiatePageSizeChange.fire(v.val())})}return w};g.pager.rangeAnnotator=function(x,w){var v={};x.events.onRenderPageLinks.addListener(function(y){var C=x.options.annotateColumnRange;var A=x.options.dataModel;var E=a(x);if(!C||!A||!E){return}var z=g.pager.findColumnDef(E,C);function D(F){var F=x.permutation?x.permutation[F]:F;return g.pager.fetchValue(x,A,F,z.valuebinding,v)}var B={};g.model.copyModel(B,x.model);g.transform(y,function(F){if(F.ID==="page-link:link"){var J=F.pageIndex;var M=J*x.model.pageSize;B.pageIndex=J;var G=l(B);var L=D(M);var I=D(G-1);var K="<b>"+L+"</b><br/>&mdash;<br/><b>"+I+"</b>";var H={type:"jQuery",func:"tooltip",args:{delay:x.options.tooltipDelay,extraClass:x.options.styles.tooltip,bodyHandler:function(){return K},showURL:false,id:x.options.tooltipId}};F.decorators.push(H)}})})};g.pagerImpl=function(v,w){var y=g.initView("fluid.pager",v,w);y.events.initiatePageChange.addListener(function(B){var C=g.copy(y.model);if(B.relativePage!==undefined){C.pageIndex=y.model.pageIndex+B.relativePage}else{C.pageIndex=B.pageIndex}if(C.pageIndex===undefined||C.pageIndex<0){C.pageIndex=0}o(y,C)});y.events.initiatePageSizeChange.addListener(function(B){var C=g.copy(y.model);C.pageSize=B;o(y,C)});var z=y.locate("pagerBar");if(z.length>0){y.pagerBar=g.initSubcomponent(y,"pagerBar",[y.events,z,g.COMPONENT_OPTIONS,y.options.strings])}var A=y.locate("pagerBarSecondary");if(A.length>0){y.pagerBarSecondary=g.initSubcomponent(y,"pagerBar",[y.events,A,g.COMPONENT_OPTIONS,y.options.strings])}y.bodyRenderer=g.initSubcomponent(y,"bodyRenderer",[y,g.COMPONENT_OPTIONS]);y.summary=g.initSubcomponent(y,"summary",[y.dom,g.COMPONENT_OPTIONS]);y.pageSize=g.initSubcomponent(y,"pageSize",[y]);y.rangeAnnotator=g.initSubcomponent(y,"rangeAnnotator",[y,g.COMPONENT_OPTIONS]);y.model=g.copy(y.options.model);var x=u(y);if(x){y.model.totalRange=x.length}if(y.model.totalRange===undefined){if(!y.pagerBar){g.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}y.model=y.pagerBar.pageList.defaultModel}y.events.initiatePageChange.fire({pageIndex:0});return y};g.defaults("fluid.pager",{pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"%first-%last of %total items"}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:g.pager.directModelFilter,sorter:g.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltipDelay:300,tooltipId:"tooltip",rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".pager-top",pagerBarSecondary:".pager-bottom",summary:".pager-summary",pageSize:".pager-page-size",headerSortStylisticOffset:"th"},styles:{tooltip:"pager-tooltip",ascendingHeader:"fl-asc",descendingHeader:"fl-desc"},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null}})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(b,a){a.skin={};a.skin.removeStyling=function(d){d=d||b("html");b("[class*=fl-]",d).andSelf().each(function(f){var e=(b.browser.msie===false)?"class":"className";if(this.getAttribute(e)){this.setAttribute(e,this.getAttribute(e).replace(/\bfl-(layout|font|theme|no-background){1}\S+/g,""))}})};var c=function(d,e){var f=a.skin.fssMap[d]||{};return f[e]||""};a.skin.style=function(e,d){d=d||b("html");d.addClass(c("textSize",e.textSize));d.addClass(c("textFont",e.textFont));d.addClass(c("textSpacing",e.textSpacing));d.addClass(c("colorScheme",e.contrast));d.addClass(c("layout",e.layout));d.addClass(c("backgroundImages",e.backgroundImages))};a.applySkin=function(e,d){d=d||b("html");a.skin.removeStyling(d);a.skin.style(e,d)};a.skin.fssMap={textSize:{"-3":"fl-font-size-70","-2":"fl-font-size-80","-1":"fl-font-size-90","+1":"fl-font-size-110","+2":"fl-font-size-120","+3":"fl-font-size-130","+4":"fl-font-size-140","+5":"fl-font-size-150"},textFont:{Serif:"fl-font-serif","Sans-Serif":"fl-font-sans",Ariel:"fl-font-arial",Verdana:"fl-font-verdana",Courier:"fl-font-monospace",Times:"fl-font-serif"},textSpacing:{Wide:"fl-font-spacing-1",Wider:"fl-font-spacing-2",Widest:"fl-font-spacing-3"},colorScheme:{Mist:"fl-theme-mist",Rust:"fl-theme-rust","High Contrast":"fl-theme-hc"},layout:{Simple:"fl-layout-linear"},backgroundImages:{"No Images":"fl-no-background-images"}}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(g,f){var c={children:[{ID:"font-style",selection:{valuebinding:"selections.textFont"},optionlist:{valuebinding:"labelMap.textFont.values"},optionnames:{valuebinding:"labelMap.textFont.names"}},{ID:"font-min-size",selection:{valuebinding:"selections.textSize"},optionlist:{valuebinding:"labelMap.textSize.values"},optionnames:{valuebinding:"labelMap.textSize.names"}},{ID:"text-spacing",selection:{valuebinding:"selections.textSpacing"},optionlist:{valuebinding:"labelMap.textSpacing.values"},optionnames:{valuebinding:"labelMap.textSpacing.names"}},{ID:"contrast",selection:{valuebinding:"selections.contrast"},optionlist:{valuebinding:"labelMap.contrast.values"},optionnames:{valuebinding:"labelMap.contrast.names"}},{ID:"background-images",selection:{valuebinding:"selections.backgroundImages"},optionlist:{valuebinding:"labelMap.backgroundImages.values"},optionnames:{valuebinding:"labelMap.backgroundImages.names"}},{ID:"background-images-row:",children:[{ID:"images-choice",choiceindex:0,parentRelativeID:"..::background-images"},{ID:"images-label",choiceindex:0,parentRelativeID:"..::background-images"}]},{ID:"background-images-row:",children:[{ID:"images-choice",choiceindex:1,parentRelativeID:"..::background-images"},{ID:"images-label",choiceindex:1,parentRelativeID:"..::background-images"}]},{ID:"layout",selection:{valuebinding:"selections.layout"},optionlist:{valuebinding:"labelMap.layout.values"},optionnames:{valuebinding:"labelMap.layout.names"}},{ID:"layout-row:",children:[{ID:"layout-choice",choiceindex:0,parentRelativeID:"..::layout"},{ID:"layout-label",choiceindex:0,parentRelativeID:"..::layout"}]},{ID:"layout-row:",children:[{ID:"layout-choice",choiceindex:1,parentRelativeID:"..::layout"},{ID:"layout-label",choiceindex:1,parentRelativeID:"..::layout"}]}]};var b=function(h){h.renderModel=h.options.renderModel;h.originalModel=f.copy(h.renderModel.selections);h.savedModel=h.options.savedSelections;g.extend(true,h.renderModel.selections,h.savedModel);h.model=h.renderModel.selections};var e=function(h){h.locate("save").click(function(){h.save()});h.locate("reset").click(function(){h.reset()});h.locate("cancel").click(function(){h.cancel()});h.locate("controls").change(function(){var j=g.extend(true,{},h.model);h.events.modelChanged.fire(h.model,j,h)})};var a=function(h){var j=function(k){var l=h.locate("previewFrame").contents();setTimeout(function(){f.applySkin(k,h.locate("preview",l))},0)};h.events.modelChanged.addListener(j);j(h.model)};var d=function(j){b(j);var h=f.selfRender(j.container,f.copy(c),{model:j.renderModel,autoBind:true,debugMode:true});e(j);a(j);j.decorators=f.initSubcomponents(j,"componentDecorators",[j,f.COMPONENT_OPTIONS]);return h};f.uiOptions=function(h,j){var l=f.initView("fluid.uiOptions",h,j);var k;l.save=function(){l.savedModel=f.copy(l.model);l.events.onSave.fire(l.model);f.applySkin(l.model)};l.reset=function(){g.extend(true,l.model,l.originalModel);l.refreshView()};l.cancel=function(){g.extend(true,l.model,l.savedModel);l.refreshView();f.applySkin(l.model)};l.refreshView=function(){f.reRender(k,l.container,f.copy(c),{model:l.renderModel,autoBind:true,debugMode:true});e(l);a(l)};l.updateModel=function(m,n){var o=f.copy(l.model);g.extend(true,l.model,m);l.events.modelChanged.fire(l.model,o,n)};k=d(l);return l};f.defaults("fluid.uiOptions",{selectors:{textSizeCtrl:".fl-hook-font-size",textSpacingCtrl:".fl-hook-font-spacing",fontCtrl:".fl-hook-font-face",colorCtrl:".fl-hook-color",layoutCtrl:".fl-hook-layout",controls:".control",tocCtrl:".toc-control",preview:".fl-hook-preview-content",previewFrame:".fl-hook-preview-frame",save:".fl-hook-preview-save",reset:".fl-hook-preview-reset",cancel:".fl-hook-preview-cancel"},events:{modelChanged:null,onSave:null,onCancel:null},savedSelections:{textFont:"Default",textSize:"Default",textSpacing:"Default",contrast:"Default",backgroundImages:"Default",layout:"Default"},renderModel:{selections:{textFont:"Default",textSize:"Default",textSpacing:"Default",contrast:"Default",backgroundImages:"Default",layout:"Default"},labelMap:{textFont:{names:["No Preference","Serif","Sans-Serif","Ariel","Verdana","Courier","Times"],values:["Default","Serif","Sans-Serif","Ariel","Verdana","Courier","Times"]},textSize:{names:["No Preference","-3","-2","-1","+1","+2","+3","+4","+5"],values:["0","-3","-2","-1","+1","+2","+3","+4","+5"]},textSpacing:{names:["No Preference","Wide","Wider","Widest"],values:["Default","Wide","Wider","Widest"]},contrast:{names:["Medium Contrast","High Contrast","Mist","Rust"],values:["Default","High Contrast","Mist","Rust"]},backgroundImages:{names:["Yes","No"],values:["Default","No Images"]},layout:{names:["Yes","No"],values:["Simple","Default"]}}}})})(jQuery,fluid_0_8);var whitespace="\n\r\t ";var closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};
XMLP=function(a){this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=[];this.m_attributes={};this.m_emitSynthetic=false};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infinite loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._checkStructure=function(c){var a=this.m_stack;if(XMLP._STATE_PROLOG==this.m_iState){this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT===this.m_iState){if((XMLP._ELM_B==c)||(XMLP._ELM_EMP==c)){this.m_stack[a.length]=this.getName()}if((XMLP._ELM_E==c)||(XMLP._ELM_EMP==c)){if(a.length===0){return XMLP._NONE}var b=a[a.length-1];this.m_stack.length--;if(b===null||b!==this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}}return c};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){var d=this.m_iP;var a=this.m_xml;if(d===a.length){return XMLP._NONE}var e=a.charAt(d);if(e==="<"){var b=a.charAt(d+1);if(b==="?"){return this._parsePI(d+2)}else{if(b==="!"){if(d===a.indexOf("<!DOCTYPE",d)){return this._parseDTD(d+9)}else{if(d===a.indexOf("<!--",d)){return this._parseComment(d+4)}else{if(d===a.indexOf("<![CDATA[",d)){return this._parseCDATA(d+9)}}}}else{return this._parseElement(d+1)}}}else{return this._parseText(d)}};var nameRegex=/([^\s>]+)/g;var attrStartRegex=/\s*([\w:]+)/gm;var attrValRegex=/\"([^\"]*)\"\s*/gm;var attrValIERegex=/([^\>\s]+)\s*/gm;var closeRegex=/\s*<\//g;XMLP.prototype._parseElement=function(n){var k,d,g;var o,e,a;d=k=this.m_xml.indexOf(">",n);if(k==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(n)=="/"){o=XMLP._ELM_E;n++}else{o=XMLP._ELM_B}if(this.m_xml.charAt(k-1)=="/"){if(o==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}o=XMLP._ELM_EMP;d--}nameRegex.lastIndex=n;var l=nameRegex.exec(this.m_xml);if(!l){return this._setErr(XMLP.ERR_ELM_NAME)}e=l[1].toLowerCase();if("li"===e&&o!==XMLP._ELM_E&&this.m_stack.length>0&&this.m_stack[this.m_stack.length-1]==="li"&&!this.m_emitSynthetic){this.m_name="li";this.m_emitSynthetic=true;return XMLP._ELM_E}this.m_attributes={};this.m_cAlt="";if(nameRegex.lastIndex<d){this.m_iP=nameRegex.lastIndex;while(this.m_iP<d){attrStartRegex.lastIndex=this.m_iP;var c=attrStartRegex.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}var h=c[1].toLowerCase();var m;if(this.m_xml.charCodeAt(attrStartRegex.lastIndex)===61){var b=this.m_xml.charCodeAt(attrStartRegex.lastIndex+1)===34?attrValRegex:attrValIERegex;b.lastIndex=attrStartRegex.lastIndex+1;c=b.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}m=c[1]}else{m=h;b=attrStartRegex}if(!this.m_attributes[h]){this.m_attributes[h]=m}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=b.lastIndex}}if(e.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=e;this.m_iP=k+1;if(closedTags[e]){closeRegex.lastIndex=k+1;var f=closeRegex.exec;if(f){var j=this.m_xml.indexOf(e,f.lastIndex);if(j===f.lastIndex){return o}else{return XMLP._ELM_EMP}}}this.m_emitSynthetic=false;return o};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a-4,b+3);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var e,a,c,d;e=this.m_xml.indexOf(">",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<e))?"]>":">";while(true){if(e==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=e;e=this.m_xml.indexOf(a,b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(e-1,e+2)!="]]>"){break}}this.m_iP=e+a.length;return XMLP._DTD};XMLP.prototype._parsePI=function(b){var e,a,d,f,c;e=this.m_xml.indexOf("?>",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,e);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,e);if(d==-1){d=e}f=SAXStrings.indexOfNonWhitespace(this.m_xml,d,e);if(f==-1){f=e}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,f,e);if(c==-1){c=e-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,f,c+1);this.m_iP=e+2;return XMLP._PI};XMLP.prototype._parseText=function(a){var b=this.m_xml.indexOf("<",a);if(b==-1){b=this.m_xml.length}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b;return XMLP._TEXT};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXStrings={};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(d,c){if(!d){return -1}c=c||d.length;var a=d.substring(0,c).split("\n");a.length--;var b=a.join("\n").length;return c-b};SAXStrings.getLineNumber=function(b,a){if(!b){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(f,a,d){if(!f){return -1}a=a||0;d=d||f.length;for(var b=a;b<d;++b){var e=f.charAt(b);if(e!==" "&&e!=="\t"&&e!=="\n"&&e!=="\r"){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(e,a,d,c,b){if(!e){return""}a=a||0;d=d||e.length;return e.substring(a,d).split(c).join(b)};function __unescapeString(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function __escapeString(e){var f=/&/g;var c=/</g;var a=/>/g;var b=/"/g;var d=/'/g;e=e.replace(f,"&amp;");e=e.replace(c,"&lt;");e=e.replace(a,"&gt;");e=e.replace(b,"&quot;");e=e.replace(d,"&apos;");return e}fluid_0_8=fluid_0_8||{};(function(x,u){var D;var v;var L;var H=0;var s=0;var n=false;var f=-1;var e=-1;var I;var N=false;var l=[];var h=[];function J(Q,t,P){D.rootlump=u.XMLLump(0,-1);L=[D.rootlump];H=0;s=0;n=false;f=-1;e=-1;I=Q;N=t;l=P;if(l){for(var O=0;O<l.length;++O){h[O]=[];l[O].tree=u.parseSelector(l[O].selector)}}}function w(){for(var t=L.length-1;t>=0;--t){var O=L[t];if(O.rsfID!==undefined){return O}}return D.rootlump}function B(){var t=u.XMLLump(H,s);if(N){t.line=v.getLineNumber();t.column=v.getColumnNumber()}D.lumps[H]=t;++H;return t}function o(O,t,P){var Q=O[t];if(!Q){Q=[];O[t]=Q}Q[Q.length]=P}function g(t,O){if(t.indexOf("scr=contribute-")!==-1){var P=t.substring("scr=contribute-".length);o(D.collectmap,P,O)}}var A=function(Q){var R=A.options,P=R.parser[R.strictMode?"strict":"loose"].exec(Q);for(var t=0,O={};t<14;t++){O[R.key[t]]=P[t]||""}O[R.q.name]={};O[R.key[12]].replace(R.q.parser,function(T,S,U){if(S){O[R.q.name][S]=U}});return O};A.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function c(O){var t=A(O);if(t.protocol||O.charAt(0)==="/"){return O}else{return I+O}}u.debugLump=function(O){var t=O.text;t+=" at ";t+="lump line "+O.line+" column "+O.column+" index "+O.lumpindex;t+=parent.href==null?"":" in file "+parent.href;
return t};function G(t){return"<"+t.tagname+">"}function r(O,t){if(!t){return false}return(" "+t+" ").indexOf(" "+O+" ")!==-1}function q(P,Q){if(P.predList){for(var O=0;O<P.predList.length;++O){var t=P.predList[O];if(t.id&&Q.attributemap.id!==t.id){return false}if(t.clazz&&!r(t.clazz,Q.attributemap["class"])){return false}if(t.tag&&Q.tagname!==t.tag){return false}}return true}}function F(U){var R=null;if(l){for(var P=0;P<l.length;++P){var S=l[P];var T=h[P];var t=T.length;if(t<S.tree.length){var O=S.tree[t];if(t>0){if(S.tree[t-1].child&&T[t-1]!==U.nestingdepth-1){continue}}var Q=q(O,U);if(Q){T[T.length]=U.nestingdepth;if(T.length===S.tree.length){if(R!==null){u.fail("Cutpoint specification error - node "+G(U)+" has already matched with rsf:id of "+R)}if(S.id===undefined||S.id===null){u.fail("Error in cutpoints list - entry at position "+P+" does not have an id set")}R=S.id}}}}}return R}function z(){if(l){for(var t=0;t<l.length;++t){var O=h[t];if(O.length>0&&O[O.length-1]===s){O.length--}}}}function a(V,Y){++s;if(n){n=false;var R=B();R.nestingdepth--}if(D.firstdocumentindex===-1){D.firstdocumentindex=H}var U=B();var t=L[L.length-1];U.uplump=t;var X=v.getName();U.tagname=X;U.attributemap=v.m_attributes;var W=U.attributemap?U.attributemap[u.ID_ATTRIBUTE]:undefined;if(W===undefined){W=F(U)}for(var Q in U.attributemap){var T=U.attributemap[Q];if(T==="href"||T==="src"||T==="codebase"||T==="action"){T=c(T);U.attributemap[Q]=T}if(W===undefined&&(T==="for"||T==="headers")){W=U.attributemap[u.ID_ATTRIBUTE]="scr=null"}}if(W){g(W,U);U.rsfID=W;var P=w();if(!P.downmap){P.downmap={}}o(P.downmap,W,U);o(D.globalmap,W,U);var O=W.indexOf(":");if(O!==-1){var S=W.substring(0,O);if(!t.finallump){t.finallump={}}t.finallump[S]=U}}U.text="<"+X+u.dumpAttributes(U.attributemap)+">";L[L.length]=U;if(V){p()}}function p(){z();var t=B();--s;t.text="</"+v.getName()+">";var O=L[L.length-1];O.close_tag=D.lumps[H-1];L.length--;n=true}function j(){if(f!==-1){if(D.firstdocumentindex===-1){D.firstdocumentindex=H}var O=v.getContent().substr(f,e-f);n=false;var t=B();t.text=O;f=-1}}u.ID_ATTRIBUTE="rsf:id";u.getPrefix=function(O){var t=O.indexOf(":");return t===-1?O:O.substring(0,t)};u.SplitID=function(P){var O={};var t=P.indexOf(":");if(t===-1){O.prefix=P}else{O.prefix=P.substring(0,t);O.suffix=P.substring(t+1)}return O};u.XMLLump=function(O,t){return{nestingdepth:t,lumpindex:O,parent:D}};u.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};u.fetchResources=function(Q,U){var O=function(V){return{success:function(W){V.resourceText=W;V.resourceKey=V.href;V.queued=false;u.fetchResources(Q,U)},error:function(W,Y,X){V.fetchError={status:W.status,textStatus:Y,errorThrown:X}}}};var t=true;for(var R in Q){var P=Q[R];if(P.href&&!P.resourceText){if(!P.queued){var T=O(P);x.ajax({url:P.href,success:T.success,error:T.error});P.queued=true}t=false}else{if(P.nodeId&&!P.resourceText){var S=document.getElementById(P.nodeId);P.resourceText=u.dom.getElementText(S);P.resourceKey=P.nodeId}}}if(t){U(Q)}};u.XMLEncode=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};u.dumpAttributes=function(t){var O="";for(var P in t){O+=" "+P+'="'+t[P]+'"'}return O};u.aggregateMMap=function(Q,P){for(var t in P){var O=Q[t];if(!O){Q[t]=[]}Q[t]=Q[t].concat(P[t])}};var E=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;u.unescapeProperties=function(O){O=O.replace(E,function(S){var T=S.substring(2);var R=parseInt(T,16);return String.fromCharCode(R)});var Q=0;while(true){var t=O.indexOf("\\",Q);if(t===-1){break}if(t===O.length-1){return[O.substring(0,O.length-1),true]}var P=O.charAt(t+1);if(P==="n"){P="\n"}if(P==="r"){P="\r"}if(P==="t"){P="\t"}O=O.substring(0,t)+P+O.substring(t+2);Q=t+1}return[O,false]};var C=/[^\\][\s:=]/;u.parseJavaProperties=function(T){var O={};T=T.replace(/\r\n/g,"\n");T=T.replace(/\r/g,"\n");lines=T.split("\n");var U,S,t,W,R;for(var P=0;P<lines.length;++P){var V=x.trim(lines[P]);if(!V||V.charAt(0)==="#"||V.charAt(0)==="!"){continue}if(!U){t="";var Q=V.search(C);if(Q===-1){S=V;W=""}else{S=x.trim(V.substring(0,Q+1));W=x.trim(V.substring(Q+2));if(W.charAt(0)===":"||W.charAt(0)==="="){W=x.trim(W.substring(1))}}S=u.unescapeProperties(S)[0];R=u.unescapeProperties(W)}else{R=u.unescapeProperties(V)}U=R[1];if(!R[1]){O[S]=t+R[0]}else{t+=R[0]}}return O};u.parseTemplates=function(R,T,t){var P=[];P.globalmap={};for(var S=0;S<T.length;++S){var Q=R[T[S]];var U=Q.href.lastIndexOf("/");var O=U===-1?"":Q.href.substring(0,U+1);var V=u.parseTemplate(Q.resourceText,O,t.scanStart&&S===0,Q.cutpoints,t);if(S===0){u.aggregateMMap(P.globalmap,V.globalmap)}V.href=Q.href;V.baseURL=O;V.resourceKey=Q.resourceKey;P[S]=V;u.aggregateMMap(P.globalmap,V.rootlump.downmap)}return P};u.parseTemplate=function(U,Q,S,R,t){D=u.XMLViewTemplate();t=t||{};J(Q,t.debugMode,R);var T=U.indexOf(u.ID_ATTRIBUTE);if(S){var O=U.indexOf(">",T);v=new XMLP(U.substring(O+1))}else{v=new XMLP(U)}parseloop:while(true){var P=v.next();switch(P){case XMLP._ELM_B:j();a(false,"");break;case XMLP._ELM_E:j();p();break;case XMLP._ELM_EMP:j();a(true,"");break;case XMLP._PI:case XMLP._DTD:f=-1;continue;case XMLP._TEXT:case XMLP._ENTITY:case XMLP._CDATA:case XMLP._COMMENT:if(f===-1){f=v.m_cB}e=v.m_cE;break;case XMLP._ERROR:u.setLogging(true);var V="Error parsing template: "+v.m_cAlt+" at line "+v.getLineNumber();u.log(V);u.log("Just read: "+v.m_xml.substring(v.m_iP-30,v.m_iP));u.log("Still to read: "+v.m_xml.substring(v.m_iP,v.m_iP+30));u.fail(V);break parseloop;case XMLP._NONE:break parseloop}}return D};var M="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var K=new RegExp("^>\\s*("+M+"+)");var y=new RegExp("^("+M+"+)(#)("+M+"+)");var m=new RegExp("^s*([#.]?)("+M+"*)");var b=new RegExp("([#.]?)("+M+"+)","g");var d=new RegExp("\\s*(>)?\\s*","g");var k=new RegExp("^\\w*$");u.parseSelector=function(T){var O=[];T=x.trim(T);b.lastIndex=0;var S=0;while(true){var Q=[];while(true){var W=b.exec(T);if(!W||W.index!==S){break}var R={};var V=W[2];if(W[1]===""){R.tag=V}else{if(W[1]==="#"){R.id=V}else{if(W[1]==="."){R.clazz=V}}}Q[Q.length]=R;S=b.lastIndex}d.lastIndex=S;var t={predList:Q};var P=d.exec(T);if(!P||P.index!==S){var U=T.substring(S);u.fail("Error in selector string - can not match child selector expression at "+U)}if(P[1]===">"){t.child=true}O[O.length]=t;if(d.lastIndex>=T.length){break}S=d.lastIndex;b.lastIndex=d.lastIndex}return O}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(O,L){function X(au){return"as child of "+(au.parent.fullID?"component with full ID "+au.parent.fullID:"root")}function Q(ax){var az="";var av=ax;if(ax.children===undefined){az=ax.ID+(ax.localID!==undefined?ax.localID:"");av=ax.parent}while(av.parent){var ay=av.parent;if(av.fullID!==undefined){az=av.fullID+az;return az}if(av.noID===undefined){var au=av.ID;if(au===undefined){L.fail("Error in component tree - component found with no ID "+X(ay)+": please check structure")}var aw=au.indexOf(":");var aA=aw===-1?au:au.substring(0,aw);az=aA+":"+(av.localID===undefined?"":av.localID)+":"+az}av=ay}return az}function U(au){return L.isPrimitive(au)||au instanceof Array&&(au.length===0||typeof(au[0])==="string")}function ab(aw,av){if(U(aw)){return{componentType:"UIBound",value:aw,ID:av}}else{var au=K(aw);if(au.ID){return{ID:av,componentType:"UIContainer",children:[au]}}else{au.ID=av;return au}}}function u(aw){if(!(aw instanceof Array)){var ax=[];for(var av in aw){var ay=aw[av];if(ay instanceof Array){for(var au=0;au<ay.length;++au){var az=ab(ay[au],av);ax[ax.length]=az}}else{ax[ax.length]=ab(ay,av)}}return ax}else{return aw}}function ao(au,av){if(au.value===undefined&&au.valuebinding!==undefined){if(!av){L.fail("Cannot perform value fixup for valuebinding "+au.valuebinding+" since no model was supplied to rendering")}au.value=L.model.getBeanValue(av,au.valuebinding)}}function ak(av,aw,au){if(av[aw]!==undefined){if(U(av[aw])){av[aw]={value:av[aw]}}}else{av[aw]={value:null}}ao(av[aw],au)}var V={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};function K(ax,aw){if(ax){for(var ay in V){if(ax[ay]!==undefined){ax.componentType=V[ay];break}}if(ax.componentType===undefined&&ax.ID!==undefined){ax.componentType="UIBound"}}if(!ax||ax.componentType===undefined){var av=ax.decorators;if(av){delete ax.decorators}ax={componentType:"UIContainer",children:ax};ax.decorators=av}var au=ax.componentType;if(au==="UIContainer"){ax.children=u(ax.children)}else{if(au==="UISelect"){ak(ax,"selection",aw);ak(ax,"optionlist",aw);ak(ax,"optionnames",aw)}else{if(au==="UILink"){ak(ax,"target",aw);ak(ax,"linktext",aw)}}}return ax}function k(av,au){if(av.submittingname===undefined&&av.willinput!==false){av.submittingname=au?au:av.fullID}return av.submittingname}function aq(aD,aA){if(aD.componentType===undefined){aD=K(aD,aA)}if(aD.componentType!=="UIContainer"&&!aD.parent){aD={children:[aD]}}if(aD.children){aD.childmap={};for(var az=0;az<aD.children.length;++az){var av=aD.children[az];if(av.componentType===undefined){av=K(av,aA);aD.children[az]=av}av.parent=aD;if(av.ID===undefined){L.fail("Error in component tree: component found with no ID "+X(av))}aD.childmap[av.ID]=av;var ax=av.ID.indexOf(":");if(ax===-1){}else{var aB=av.ID.substring(0,ax);var au=aD.childmap[aB];if(!au){au=[];aD.childmap[aB]=au}if(av.localID===undefined&&au.length!==0){av.localID=au.length}au[au.length]=av}av.fullID=Q(av);var aw=av.componentType;if(aw=="UISelect"){av.selection.fullID=av.fullID+"-selection"}else{if(aw=="UIInitBlock"){var aC=av.functionname+"(";for(var ay=0;ay<av.arguments.length;++ay){if(av.arguments[ay] instanceof L.ComponentReference){av.arguments[ay]=av.parent.fullID+av.arguments[ay].reference}aC+='"'+av.arguments[ay]+'"';if(ay<av.arguments.length-1){aC+=", "}}av.markup=aC+")\n";av.componentType="UIVerbatim"}else{if(aw=="UIBound"){ao(av,aA)}}}aq(av,aA)}}return aD}var J={};var ah={};var aa={};var y={};var z={};var Z="";var at=false;
var o={};var G={};var T=[];var q={};function an(av,au,aw){return av.resourceKey+au.fullID+aw}function x(az,au,aw,aB){var aA;var ay=aw?aw[az]:null;if(ay){for(var av=0;av<ay.length;++av){var ax=ay[av];if(!aA&&ax.rsfID==au){aA=ax}if(ax.rsfID==az){return ax}}}return aA}function aj(ax,az){var ay=az.jointID?az.jointID:az.ID;var aw=L.SplitID(ay);var au=aw.prefix+":";var av=x(ay,au,ax.downmap,az);if(av){return av}if(az.children){av=x(ay,au,J,az);if(av){return av}}return null}function v(au){if(!y[au.href]){L.aggregateMMap(z,au.collectmap);y[au.href]=true}}function B(ay,av){for(var aw=0;aw<ay.children.length;++aw){var az=ay.children[aw];if(az.children){var aB=aj(av,az);if(aB){ah[az.fullID]=aB;var au=aB.attributemap.id;if(au!==undefined){aa[an(av.parent,ay,au)]=branchfullID}v(aB.parent);B(az,aB)}}}if(av.downmap){for(var au in av.downmap){if(au.indexOf(":")===-1){var aA=av.downmap[au];for(var aw=0;aw<aA.length;++aw){var ax=aA[aw];var aC=ax.attributemap.id;if(aC!==undefined&&ax.rsfID!==undefined){var aB=ae(ay,ax.rsfID);if(aB!==null){aa[an(av.parent,ay,aC)]=aB.fullID}}}}}}}function w(aw,av,au){ah={};aa={};y={};z={};J=aw;ah[av.fullID]=au;B(av,au)}function H(aw,au){var av={};O.extend(true,av,au.attributemap);n(av,aw);r(aw,av);Z+="<"+au.tagname+" ";Z+=L.dumpAttributes(av);Z+=">"}function m(av,ax,au){for(;ax<au;++ax){var aw=av[ax].text;if(aw){Z+=av[ax].text}}}function I(aw,az,au,ay,av){var aA=az;while(true){if(az===aw.length){break}var ax=aw[az];if(ax.nestingdepth<au){break}if(ax.rsfID!==undefined){if(!av){break}if(av&&ax.nestingdepth>au+(ay?0:1)){L.log("Error in component tree - leaf component found to contain further components - at "+ax.toString())}else{break}}++az}if(!ay&&(az==aw.length||!aw[az].rsfID)){--az}m(aw,aA,az);return az}var s={};function ai(){if(!s.iselide){Z+="</"+s.uselump.tagname+">"}}function N(){m(s.uselump.parent.lumps,s.uselump.lumpindex+1,s.close.lumpindex+(s.iselide?0:1))}function W(){if(!s.iselide){Z+=L.dumpAttributes(s.attrcopy)}S()}function af(){if(s.iselide){W()}else{Z+=L.dumpAttributes(s.attrcopy);Z+=s.endopen.lumpindex===s.close.lumpindex?"/>":">";s.nextpos=s.endopen.lumpindex}}function S(){if(s.endopen.lumpindex===s.close.lumpindex){if(!s.iselide){Z+="/>"}}else{if(!s.iselide){Z+=">"}m(s.uselump.parent.lumps,s.endopen.lumpindex,s.close.lumpindex+(s.iselide?0:1))}}function P(au){if(f(au)){ap(au)}else{W()}}function am(au){if(s.iselide){P(s.value)}else{if(f(au)){ap(au)}else{af()}}}function ap(au){Z+=L.dumpAttributes(s.attrcopy);if(!s.iselide){Z+=">"}Z+=L.XMLEncode(au.toString());ai()}function f(au){return au!==null&&au!==undefined&&!e(au)}function e(au){return false}function ad(av,au){return au}function al(aw){Z+='<input type="hidden" ';var av=aw.virtual;var au={};au[av?"id":"name"]=aw.name;au.value=aw.value;Z+=L.dumpAttributes(au);Z+=" />\n"}function b(au,av){var aw=s.uselump.tagname;if(G.autoBind&&(aw==="input"||aw==="select")&&!q[av]){D(au,[{jQuery:["change",function(){L.applyChange(L.byId(av))}]}],s.attrcopy,av)}}function t(au,aw){if(au){var av=aw?aw:au;if(o&&av.submittingname&&av.valuebinding){o[av.submittingname]={name:av.submittingname,EL:av.valuebinding,oldvalue:av.value};b(au,au.fullID)}if(au.fossilizedbinding){al(au.fossilizedbinding)}if(au.fossilizedshaper){al(au.fossilizedshaper)}}}function l(au){if(!q[au.selection.fullID]){q[au.selection.fullID]=true;t(au.selection);t(au.optionlist);t(au.optionnames)}}L.NULL_STRING="\u25a9null\u25a9";var Y={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};function F(au,aw){var av=au.selection;return av.value&&typeof(av.value)!=="string"&&typeof(av.value.length)==="number"?O.inArray(aw,av.value,aw)!==-1:av.value===aw}function ac(au,av){au=au.parent;if(av.indexOf("..::")===0){av=av.substring(4);au=au.parent}return au.childmap[av]}function ag(av){var ax=[];for(var aw in av){if(aw==="$"){aw="jQuery"}var ay=av[aw];var au={type:aw};if(aw==="jQuery"){au.func=ay[0];au.args=ay.slice(1)}else{if(aw==="addClass"){au.classes=ay}else{if(aw==="attrs"){au.attributes=ay}else{if(aw==="identify"){au.key=ay}}}}ax[ax.length]=au}return ax}function D(ay,aD,av,aA){G.idMap=G.idMap||{};for(var ax=0;ax<aD.length;++ax){var aw=aD[ax];var az=aw.type;if(!az){var aB=ag(aw);D(ay,aB,av,aA);continue}if(az==="$"){az=aw.type="jQuery"}if(az==="jQuery"||az==="event"){var au=n(av,ay,true,aA);var aC=O.extend(true,{id:au},aw);T[T.length]=aC}else{if(az==="attrs"){O.extend(true,av,aw.attributes)}else{if(az==="addClass"){var aE={nodeType:1,className:av["class"]||""};O(aE).addClass(aw.classes);av["class"]=aE.className}else{if(az==="identify"){var au=n(av,ay,true,aA);G.idMap[aw.key]=au}}}}}}function r(au,av){if(!au.decorators){return}if(au.decorators.length===undefined){au.decorators=ag(au.decorators)}D(au,au.decorators,av)}function A(aH){var az=s.attrcopy;var au=s.uselump.parent.lumps;var aB=s.uselump.lumpindex;var aF=aH.componentType;var aK=s.uselump.tagname;r(aH,az);if(aF==="UIMessage"){aF="UIBound";if(!G.messageLocator){aH.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{aH.value=G.messageLocator(aH.messagekey,aH.args)}}function aw(aO,aP){L.fail("Error in component tree - UISelectChoice with id "+aO.fullID+aP)}if(aF==="UIBound"||aF==="UISelectChoice"){var aC;if(aH.choiceindex!==undefined){if(aH.parentFullID){aC=getAbsoluteComponent(view,aH.parentFullID);if(!aC){aw(aH," has parentFullID of "+aH.parentFullID+" which cannot be resolved")}}else{if(aH.parentRelativeID!==undefined){aC=ac(aH,aH.parentRelativeID);if(!aC){aw(aH," has parentRelativeID of "+aH.parentRelativeID+" which cannot be resolved")}}else{aw(aH," does not have either parentFullID or parentRelativeID set")}}k(aC.selection);l(aC)}var ay=aC?aC.selection.submittingname:aH.submittingname;if(aK==="input"||aK==="textarea"){if(!aC){ay=k(aH)}if(ay!==undefined){az.name=ay}}t(aH,aC?aC.selection:null);if(typeof(aH.value)==="boolean"||az.type==="radio"||az.type==="checkbox"){var aA;var aJ=aH.value;if(aH.choiceindex!==undefined){if(!aC.optionlist.value){L.fail("Error in component tree - selection control with full ID "+aC.fullID+" has no values")}aA=aC.optionlist.value[aH.choiceindex];aJ=F(aC,aA)}if(f(aJ)){if(aJ){az.checked="checked"}else{delete az.checked}}az.value=aA?aA:"true";P(null)}else{if(aH.value instanceof Array){N()}else{var aG=aC?aC[aK==="textarea"||aK==="input"?"optionlist":"optionnames"].value[aH.choiceindex]:aH.value;if(aK==="textarea"){if(e(aG)&&aH.willinput){aG=""}P(aG)}else{if(aK==="input"){if(aH.willinput||f(aG)){az.value=aG}P(null)}else{delete az.name;am(aG)}}}}}else{if(aF==="UISelect"){b(aH,aH.selection.fullID);var aN=aK==="select";var ax=false;if(aH.selection.value instanceof Array){ax=true;if(aN){az.multiple="multiple"}}k(aH.selection,az.id);if(aN){if(aH.selection.willinput!==false){az.name=aH.selection.submittingname}}Z+=L.dumpAttributes(az);if(aN){Z+=">";var av=aH.optionlist.value;var aE=aH.optionnames===null||aH.optionnames===undefined||!aH.optionnames.value?av:aH.optionnames.value;if(!aE||!aE.length){L.fail("Error in component tree - UISelect component with fullID "+aH.fullID+" does not have optionnames set")}for(var aI=0;aI<aE.length;++aI){Z+='<option value="';var aG=av[aI];if(aG===null){aG=L.NULL_STRING}Z+=L.XMLEncode(aG);if(F(aH,aG)){Z+='" selected="selected'}Z+='">';Z+=L.XMLEncode(aE[aI]);Z+="</option>\n"}ai()}else{S()}l(aH)}else{if(aF==="UILink"){var aD=Y[aK];if(aD){var aM=aH.target.value;if(!f(aM)){aM=az[attname]}else{aM=ad(s.uselump.parent,aM)}az[aD]=aM}var aG=aH.linktext.value;if(!f(aG)){af()}else{P(aG)}}else{if(aH.markup!==undefined){var aL=aH.markup;if(aL===null){Z+=L.dumpAttributes(az);Z+=">";N()}else{if(!s.iselide){Z+=L.dumpAttributes(az);Z+=">"}Z+=aL;ai()}}else{}}}}}function n(ax,aw,av,az){if(!av){delete ax["rsf:id"]}if(az!==undefined){ax.id=az}else{if(ax.id||av){ax.id=aw.fullID}}var ay=1;var au=ax.id;while(G.document.getElementById(ax.id)){ax.id=au+"-"+(ay++)}return ax.id}function d(au){var ay;var aw=s.attrcopy["for"];if(aw!==undefined){ay="for"}else{aw=s.attrcopy.headers;if(aw!==undefined){ay="headers"}}if(!ay){return}var ax=s.uselump.tagname;if(ay==="for"&&ax!=="label"){return}if(ay==="headers"&&ax!=="td"&&ax!=="th"){return}var av=aa[an(s.uselump.parent,au,aw)];if(av!==undefined){s.attrcopy[ay]=av}}function R(au){Z+=("<!-- "+L.XMLEncode(au)+"-->")}function g(au){Z+='<span style="background-color:#FF466B;color:white;padding:1px;">';Z+=au;Z+="</span><br/>"}function E(au){var av=au.fullID;return !av?"component tree root":"full path "+av}function p(av,aE,aA){var aC=aA.lumpindex;var aH=aA.parent.lumps;var aB=-1;var aD=aH[aC+1];var au=aA.close_tag;aB=au.lumpindex+1;var az=aA.downmap?aA.downmap["payload-component"]:null;var aG=az?az[0]:null;var aF=aA.rsfID.charCodeAt(0)===126;var ay=aD;var aI=au;var ax=aA;var aw={};O.extend(true,aw,(aG===null?aA:aG).attributemap);s.attrcopy=aw;s.uselump=ax;s.endopen=ay;s.close=aI;s.nextpos=aB;s.iselide=aF;d(av);if(aE===null){}else{if(aG){s.endopen=aH[aG.lumpindex+1];s.close=aG.close_tag;s.uselump=aG;m(aH,aC,aG.lumpindex);aC=aG.lumpindex}n(aw,aE);if(!aF){Z+="<"+s.uselump.tagname}A(aE);if(aG!==null){if(s.nextpos===aB){m(aH,s.close.lumpindex+1,au.lumpindex+1)}}aB=s.nextpos}return aB}function j(ax,au){var aw=au.parent;var av=aw.lumps[au.lumpindex+1];if(ax.children!==undefined){H(ax,au)}else{p(ax.parent,ax,au)}M(ax,au,av)}function ae(ax,ay,aw){if(ay.indexOf("msg=")===0){var au=ay.substring(4);return{componentType:"UIMessage",messagekey:au}}while(ax){var av=ax.childmap[ay];if(av){return av}ax=ax.parent}return null}function ar(av,aw){var au;while(av){au=av.childmap[aw];if(au){break}av=av.parent}return au}function C(aw,ax){var av=L.SplitID(ax.ID);var au=aw.downmap[ax.ID];if(au===null){au=aw.downmap[av.prefix+":"]}return au===null?null:au[0]}function M(az,aO,aF){var aI=aF.lumpindex;var aL=aO.nestingdepth;var aA=aO.parent;if(at){var aM={}}while(true){aI=I(aA.lumps,aI,aL,true,false);if(aI===aA.lumps.length){break}var aD=aA.lumps[aI];if(aD.nestingdepth<aL){break
}var aE=aD.rsfID;if(aE.charCodeAt(0)===126){aE=aE.substring(1)}if(aE.indexOf(":")!==-1){var aG=L.getPrefix(aE);var au=ar(az,aG);var aw=aD.uplump.finallump[aG];var ax=aw.close_tag;if(au){for(var aH=0;aH<au.length;++aH){var av=au[aH];if(av.children){var aJ=ah[av.fullID];if(aJ){if(at){R("Branching for "+av.fullID+" from "+L.debugLump(aD)+" to "+L.debugLump(aJ))}j(av,aJ);if(at){R("Branch returned for "+av.fullID+L.debugLump(aD)+" to "+L.debugLump(aJ))}}else{if(at){g("No matching template branch found for branch container with full ID "+av.fullID+" rendering from parent template branch "+L.debugLump(aF))}}}else{var aJ=C(aO,av);if(!aJ){if(at){g("Repetitive leaf with full ID "+av.fullID+" could not be rendered from parent template branch "+L.debugLump(aF))}continue}var aK=p(az,av,aJ);var aC=aK<aA.lumps.lengtn&&aA.lumps[aK].nestingdepth>=aJ.nestingdepth;var ay=av.children?av:az;if(aC){M(ay,aJ,aA.lumps[aK]);aK=aJ.close_tag.lumpindex+1}if(aH!==au.length-1){if(aK<ax.lumpindex){I(aA.lumps,aK,aJ.nestingdepth-1,false,false)}}else{I(aA.lumps,aK,aJ.nestingdepth,true,false)}}}}else{if(at){g("No branch container with prefix "+aG+": found in container "+E(az)+" rendering at template position "+L.debugLump(aF)+", skipping")}}aI=ax.lumpindex+1;if(at){R("Stack returned from branch for ID "+aE+" to "+L.debugLump(aF)+": skipping from "+L.debugLump(aD)+" to "+L.debugLump(ax))}}else{var aB;if(aE){if(at){aM[aE]=true}aB=ae(az,aE,aD)}if(aB&&aB.children!==undefined){j(aB);aI=aD.close_tag.lumpindex+1}else{aI=p(az,aB,aD)}}if(aI===aA.lumps.length){break}}if(at){var au=az.children;for(var aN in au){var av=au[aN];if(!(av.ID.indexOf(":")!==-1)&&!aM[av.ID]){g("Leaf child component "+av.componentType+" with full ID "+av.fullID+" could not be found within template "+L.debugLump(aF))}}}}function c(au){m(au.parent.lumps,au.lumpindex,au.close_tag.lumpindex+1)}function a(){for(var aw in z){var au=z[aw];for(var av=0;av<au.length;++av){c(au[av])}}}function h(){for(var aw=0;aw<T.length;++aw){var au=T[aw];var ax=L.byId(au.id);if(!ax){L.fail("Error during rendering - component with id "+au.id+" which has a queued decorator was not found in the output markup")}if(au.type==="jQuery"){var av=O(ax);av[au.func].apply(av,O.makeArray(au.args))}else{if(au.type==="event"){ax[au.event]=au.handler}}}}L.ComponentReference=function(au){this.reference=au};L.VALUE={};L.explode=function(ax,au){var aw=[];for(var av in ax){var ay=au===undefined?av:au+"."+av;aw[aw.length]={ID:av,value:ax[av],valuebinding:ay}}return aw};L.explodeSelectionToInputs=function(au,av){return L.transform(au,function(ax,aw){return{ID:av.rowID,children:[{ID:av.inputID,parentRelativeID:"..::"+av.selectID,choiceindex:aw},{ID:av.labelID,parentRelativeID:"..::"+av.selectID,choiceindex:aw}]}})};L.findForm=function(au){return L.findAncestor(au,function(av){return av.nodeName.toLowerCase()==="form"})};L.resolveMessageSource=function(au){if(au.type==="data"){if(au.url===undefined){return L.messageLocator(au.messages)}else{}}};L.value=function(az,aw){var ax=L.unwrap(az);var aC=false;if(ax.nodeType===undefined&&ax.length>1){ax=ax[0];aC=true}var ay=O(ax);if("input"!==ax.nodeName.toLowerCase()||!/radio|checkbox/.test(ax.type)){return O(ax).val(aw)}var av=ax.name;if(av===undefined){L.fail("Cannot acquire value from node "+L.dumpEl(ax)+" which does not have name attribute set")}var au;if(aC){au=az}else{var au=document.getElementsByName(av);var aB=L.findForm(ax);au=O.grep(au,function(aD){if(aD.name!==av){return false}return !aB||L.dom.isContainer(aB,aD)})}if(aw!==undefined){if(typeof(aw)==="boolean"){aw===(aw?"true":"false")}O.each(au,function(){this.checked=(aw instanceof Array?O.inArray(this.value,aw)!==-1:aw===this.value)})}else{var aA=O.map(au,function(aD){return aD.checked?aD.value:null});return ax.type==="radio"?aA[0]:aA}};L.applyChange=function(ay,az){ay=L.unwrap(ay);if(az===undefined){az=L.value(ay)}if(ay.nodeType===undefined&&ay.length>0){ay=ay[0]}var au=L.findData(ay,L.BINDING_ROOT_KEY);if(!au){L.fail("Bound data could not be discovered in any node above "+L.dumpEl(ay))}var av=ay.name;var aw=au.fossils[av];if(!aw){L.fail("No fossil discovered for name "+av+" in fossil record above "+L.dumpEl(ay))}if(typeof(aw.oldvalue)==="boolean"){az=az?true:false}var ax=au.fossils[av].EL;L.model.setBeanValue(au.data,ax,az)};L.makeBranches=function(){var ax;var av;for(var au=0;au<arguments.length;++au){var aw=arguments[au];var ay;if(typeof(aw)==="string"){ay={ID:aw}}else{if(aw instanceof Array){ay={ID:aw[0],jointID:aw[1]}}else{O.extend(true,av,aw);ay=av}}if(av&&ay!==av){if(!av.children){av.children=[]}av.children[av.children.length]=ay}av=ay;if(!ax){ax=ay}}return ax};L.renderTemplates=function(ax,au,av,aw){av=av||{};au=au||{};at=av.debugMode;if(!av.messageLocator&&av.messageSource){av.messageLocator=L.resolveMessageSource(av.messageSource)}av.document=av.document||document;o=aw;T=[];au=aq(au,av.model);var ay=ax[0];w(ax.globalmap,au,ay.rootlump);Z="";q={};G=av;a();M(au,ay.rootlump,ay.lumps[ay.firstdocumentindex]);return Z};L.BINDING_ROOT_KEY="fluid-binding-root";L.findData=function(av,au){while(av){var aw=O.data(av,au);if(aw){return aw}av=av.parentNode}};L.bindFossils=function(av,aw,au){O.data(av,L.BINDING_ROOT_KEY,{data:aw,fossils:au})};L.reRender=function(aw,ay,au,av){av=av||{};ay=L.unwrap(ay);if(O.browser.msie){O(ay).empty()}else{ay.innerHTML=""}var ax={};var az=L.renderTemplates(aw,au,av,ax);if(av.renderRaw){az=L.XMLEncode(az);az=az.replace(/\n/g,"<br/>")}if(av.model){L.bindFossils(ay,av.model,ax)}if(O.browser.msie){O(ay).html(az)}else{ay.innerHTML=az}h();return aw};L.selfRender=function(ay,au,aw){aw=aw||{};ay=L.unwrap(ay);var av={base:{resourceText:ay.innerHTML,href:".",resourceKey:".",cutpoints:aw.cutpoints}};var ax=L.parseTemplates(av,["base"],aw);return L.reRender(ax,ay,au,aw)}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(e,f){var h=function(n,o){var k=[];for(var m=0;m<n.length;m++){var l=n[m];if(o(l)===true){k.push(l)}}return k};var c=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.COMPLETE)})};var j=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.QUEUED||l.filestatus===f.uploader.fileStatusConstants.CANCELLED)})};var a=function(m,l){var k=e.inArray(l,m.files);m.files.splice(k,1)};var g=function(k){k.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};var b=function(k){var l=k.getReadyFiles();k.currentBatch.files=l;k.currentBatch.totalBytes=f.fileQueue.sizeOfFiles(l)};var d=function(k){g(k);b(k)};f.fileQueue=function(){var k={};k.files=[];k.isUploading=false;k.addFile=function(l){k.files.push(l)};k.removeFile=function(l){a(k,l)};k.totalBytes=function(){return f.fileQueue.sizeOfFiles(k.files)};k.getReadyFiles=function(){return j(k)};k.sizeOfReadyFiles=function(){return f.fileQueue.sizeOfFiles(k.getReadyFiles())};k.getUploadedFiles=function(){return c(k)};k.sizeOfUploadedFiles=function(){return f.fileQueue.sizeOfFiles(k.getUploadedFiles())};k.setupCurrentBatch=function(){d(k)};k.clearCurrentBatch=function(){g(k)};k.updateCurrentBatch=function(){b(k)};return k};f.fileQueue.sizeOfFiles=function(m){var n=0;for(var l=0;l<m.length;l++){var k=m[l];n+=k.size}return n};f.fileQueue.manager=function(k,l){var m={};m.queue=k;m.events=l;m.start=function(){m.queue.setupCurrentBatch();m.queue.isUploading=true;m.queue.stopUploadOnFileComplete=false;m.events.onUploadStart.fire(m.queue.currentBatch.files)};m.startFile=function(){m.queue.currentBatch.fileIdx++;m.queue.currentBatch.bytesUploadedForFile=0;m.queue.currentBatch.previousBytesUploadedForFile=0};m.finishFile=function(o){var n=m.queue.currentBatch;n.numFilesCompleted++;m.events.afterFileComplete.fire(o)};m.shouldUploadNextFile=function(){return !m.queue.stopUploadOnFileComplete&&m.queue.isUploading&&m.queue.currentBatch.numFilesCompleted<m.queue.currentBatch.files.length};m.complete=function(){m.events.afterUploadComplete.fire(m.queue.currentBatch.files);m.queue.clearCurrentBatch()};return m}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(e,f){var a=function(o,n,p,l){if(!l){return}var m=Math.min(p.chunkSize,o.size);p.bytesUploaded=Math.min(p.bytesUploaded+m,o.size);n.onFileProgress.fire(o,p.bytesUploaded,o.size)};var h=function(m,l){if(m.swfUploadSettings){m.swfUploadSettings.upload_complete_handler(l)}else{m.events.afterFileComplete.fire(l)}};var d=function(m,l){m.queueManager.finishFile(l);if(m.queueManager.shouldUploadNextFile()){j(m)}else{m.queueManager.complete()}};var c=function(m){if(!m.queue.isUploading){return}var l=m.demoState.currentFile;l.filestatus=f.uploader.fileStatusConstants.COMPLETE;m.events.onFileSuccess.fire(l);m.demoState.fileIdx++;d(m,l)};var g=function(m){if(!m.queue.isUploading){return}var l=m.demoState.currentFile;if(m.demoState.bytesUploaded<l.size){m.invokeAfterRandomDelay(function(){a(l,m.events,m.demoState,m.queue.isUploading);g(m)})}else{c(m)}};var j=function(l){l.demoState.currentFile=l.queue.files[l.demoState.fileIdx];l.demoState.chunksForCurrentFile=Math.ceil(l.demoState.currentFile/l.demoState.chunkSize);l.demoState.bytesUploaded=0;l.queue.isUploading=true;l.events.onFileStart.fire(l.demoState.currentFile);l.demoState.currentFile.filestatus=f.uploader.fileStatusConstants.IN_PROGRESS;g(l)};var k=function(m){var l=m.demoState.currentFile;l.filestatus=f.uploader.fileStatusConstants.CANCELLED;m.events.onFileError.fire(l,f.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");d(m,l);m.events.onUploadStop.fire()};var b=function(l){if(l.options.simulateDelay===undefined||l.options.simulateDelay===null){l.options.simulateDelay=true}l.demoState={fileIdx:0,chunkSize:200000};return l};f.demoUploadManager=function(l){var m=l;m.start=function(){m.queueManager.start();j(m)};m.stop=function(){k(m)};m.invokeAfterRandomDelay=function(o){var n;if(m.options.simulateDelay){n=Math.floor(Math.random()*1000+100);setTimeout(o,n)
}else{o()}};b(m);return m}})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(g,n){var l=function(){var u=function(){};SWFUpload.prototype.selectFile=u;SWFUpload.prototype.selectFiles=u};var e=function(u,v){u.returnedOptions={uploadManager:{type:v.options.uploadManager.type||v.options.uploadManager}}};var d=function(u,v){return function(){var x=g("#"+v.uploadManager.swfUploader.movieName,v.container);var w=v.locate("browseButton");n.tabindex(x,0);x.ariaRole("button");x.attr("alt","Browse files button");if(u.isTransparent){x.addClass(u.options.styles.browseButtonOverlay);x.css("top",w.position().top);x.css("left",w.position().left)}}};var h=function(){var u=g("<div class='fl-uploader-flash9-container'></div>");var w=g("<span></span>");var v=n.allocateSimpleId(w);u.append(w);g("body").append(u);return v};var j=function(u,v){u.returnedOptions.uploadManager.options={flashURL:u.options.flash9URL||undefined,flashButtonPeerId:h()}};var p=function(){var u=g("<span></span>");n.allocateSimpleId(u);return u};var k=function(v){var w=g("<span></span>");var u=n.allocateSimpleId(w);v.before(w);l();return u};var s=function(w,x){var v=x.locate("browseButton");n.tabindex(v,-1);w.isTransparent=w.options.flashButtonAlwaysVisible?false:(!g.browser.msie||w.options.transparentEvenInIE);var u=w.isTransparent?k(v):n.allocateSimpleId(v);w.returnedOptions.uploadManager.options={flashURL:w.options.flash10URL||undefined,flashButtonImageURL:w.isTransparent?undefined:w.options.flashButtonImageURL,flashButtonPeerId:u,flashButtonHeight:w.isTransparent?v.outerHeight():w.options.flashButtonHeight,flashButtonWidth:w.isTransparent?v.outerWidth():w.options.flashButtonWidth,flashButtonWindowMode:w.isTransparent?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.WINDOW,flashButtonCursorEffect:SWFUpload.CURSOR.HAND,listeners:{afterReady:d(w,x),onUploadStart:function(){x.uploadManager.swfUploader.setButtonDisabled(true)},afterUploadComplete:function(){x.uploadManager.swfUploader.setButtonDisabled(false)}}}};n.swfUploadSetupDecorator=function(w,u){var v={};n.mergeComponentOptions(v,"fluid.swfUploadSetupDecorator",u);v.flashVersion=swfobject.getFlashPlayerVersion().major;e(v,w);if(v.flashVersion===9){j(v,w)}else{s(v,w)}return v};n.defaults("fluid.swfUploadSetupDecorator",{flashButtonAlwaysVisible:true,transparentEvenInIE:false,flashButtonImageURL:"../../images/uploader/browse.png",flashButtonHeight:22,flashButtonWidth:106,styles:{browseButtonOverlay:"fl-browse-button-overlay"}});var f={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileTypesDescription:"file_types_description",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};var b={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var r=function(z,x,y){var u=y||{};for(var v in x){var w=z[v];if(w){u[w]=x[v]}}return u};var c=function(y,A,z){var v=z||{};for(var w in y.events){var u=y.events[w].fire;var x=A[w];if(x){v[x]=u}}v.upload_complete_handler=function(B){y.queueManager.finishFile(B);if(y.queueManager.shouldUploadNextFile()){y.swfUploader.startUpload()}else{if(y.queueManager.queue.stopUploadOnFileComplete){y.swfUploader.stopUpload()}y.queueManager.complete()}};return v};var q=function(u){if(u.queue.isUploading){return}if(u.options.fileQueueLimit===1){u.swfUploader.selectFile()}else{u.swfUploader.selectFiles()}};var m=function(u){u.queue.stopUploadOnFileComplete=true;u.events.onUploadStop.fire()};var a=function(u){var v=function(w){n.find(u.queue.files,function(x){if(x.id===w.id){x.filestatus=w.filestatus;return true}})};u.events.afterFileQueued.addListener(function(w){u.queue.addFile(w)});u.events.onFileStart.addListener(function(w){u.queueManager.startFile();v(w)});u.events.onFileProgress.addListener(function(x,A,y){var w=u.queue.currentBatch;var z=A-w.previousBytesUploadedForFile;w.totalBytesUploaded+=z;w.bytesUploadedForFile+=z;w.previousBytesUploadedForFile=A;v(x)});u.events.onFileError.addListener(function(x,w){if(w===n.uploader.errorConstants.UPLOAD_STOPPED){u.queue.isUploading=false}else{if(u.queue.isUploading){u.queue.currentBatch.numFilesErrored++}}v(x)});u.events.onFileSuccess.addListener(function(w){if(u.queue.currentBatch.bytesUploadedForFile===0){u.queue.currentBatch.totalBytesUploaded+=w.size}v(w)});u.events.afterUploadComplete.addListener(function(){u.queue.isUploading=false})};var t=function(v,u){v.queue.removeFile(u);v.swfUploader.cancelUpload(u.id);v.events.afterFileRemoved.fire(u)};var o=function(v,u){v.events=u;v.queue=n.fileQueue();v.queueManager=n.fileQueue.manager(v.queue,v.events);v.swfUploadSettings=r(f,v.options);c(v,b,v.swfUploadSettings);v.swfUploader=new SWFUpload(v.swfUploadSettings);a(v)};n.swfUploadManager=function(v,u){var w={};n.mergeComponentOptions(w,"fluid.swfUploadManager",u);n.mergeListeners(v,w.options.listeners);w.browseForFiles=function(){q(w)};w.removeFile=function(x){t(w,x)};w.start=function(){w.queueManager.start();w.swfUploader.startUpload()};w.stop=function(){m(w)};o(w,v);return w};n.defaults("fluid.swfUploadManager",{uploadURL:"",flashURL:"../../flash/swfupload.swf",flashButtonPeerId:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*.*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0,debug:false})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(f,d){var a=function(j){var h=j.options.maxHeight;var k=(j.scrollingElm.children().eq(0).height()>h);var g=(k)?h:"";j.scrollingElm.height(g)};var e=function(g){g.scrollingElm[0].scrollTop=g.scrollingElm[0].scrollHeight};var c=function(l,k){if(!k||k.length<1){return}var m=0;var h=0;var q=k[0].offsetTop;var j=k.height();var n=l.scrollingElm[0].scrollTop;var p=l.scrollingElm.height();if(l.options.padScroll){var g=k.prev().height();m=(g+j<=p)?g:0;var o=k.next().height();h=(o+j<=p)?o:0}if((q-m)<n){l.scrollingElm[0].scrollTop=q-m}if(((q+j)+h)>(n+p)){j=(j<p)?j:p;l.scrollingElm[0].scrollTop=(q-p+j+h)}};var b=function(g){g.scrollingElm=g.container.parents(g.options.selectors.wrapper);if(!g.scrollingElm.length){d.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!f.browser.msie||f.browser.version>6){g.scrollingElm.css("max-height",g.options.maxHeight)}};d.scroller=function(g,h){var j=d.initView("fluid.scroller",g,h);b(j);j.scrollTo=function(k){c(j,k)};j.scrollBottom=function(){e(j)};j.refreshView=function(){if(f.browser.msie&&f.browser.version<7){a(j)}};j.refreshView();return j};d.defaults("fluid.scroller",{selectors:{wrapper:".fl-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(f,g){var e=function(r,q,p){q=(q)?q:p;r.animate(q.params,q.duration,q.callback)};var m=function(r,p,q){r.queue("fx",[]);r.animate({width:p,queue:false},q)};var j=function(p,q){if(q===false){p.displayElement.show()}else{e(p.displayElement,q,p.options.showAnimation)}};var a=function(r,q,s){q=(q===null||isNaN(q))?r.options.delay:q;if(q){var p=setTimeout(function(){a(r,0,s)},q)}else{if(s===false){r.displayElement.hide()}else{e(r.displayElement,s,r.options.hideAnimation)}}};var o=function(r,q){var p=r.indicator.width();var s=r.options.animate;if((q>p)&&(s==="both"||s==="forward")){m(r.indicator,q,r.options.speed)}else{if((q<p)&&(s==="both"||s==="backward")){m(r.indicator,q,r.options.speed)}else{r.indicator.width(q)}}};var k=function(q,p){return Math.round((Math.min(p,100)*q.progressBar.width())/100)};var l=function(p){p.ariaRole("progressbar");p.ariaState("valuemin","0");p.ariaState("valuemax","100");p.ariaState("live","assertive");p.ariaState("busy","false");p.ariaState("valuenow","0");p.ariaState("valuetext","")};var h=function(s,r){var q=r<100&&r>0;s.ariaElement.ariaState("busy",q);s.ariaElement.ariaState("valuenow",r);if(q){var p=g.stringTemplate(s.options.ariaBusyText,{percentComplete:r});s.ariaElement.ariaState("valuetext",p)}else{if(r===100){s.ariaElement.ariaState("valuetext",s.options.ariaDoneText)}}};var d=function(p,q){p.html(q)};var n=function(p){p.indicator.css("top",p.progressBar.position().top).css("left",0).height(p.progressBar.height()).width(p.options.minWidth)};var b=function(r,q,p,t){j(r,t);if(q!==null){var s=Math.max(k(r,parseFloat(q)),r.options.minWidth);o(r,s)}if(p!==null){d(r.label,p)}if(r.ariaElement){h(r,q)}};var c=function(p){p.displayElement=p.locate("displayElement");if(p.options.initiallyHidden){p.displayElement.hide()}p.progressBar=p.locate("progressBar");p.label=p.locate("label");p.indicator=p.locate("indicator");p.ariaElement=p.locate("ariaElement");p.indicator.width(p.options.minWidth);if(p.ariaElement){l(p.ariaElement)}};g.progress=function(p,q){var r=g.initView("fluid.progress",p,q);c(r);r.show=function(s){j(r,s)};r.hide=function(s,t){a(r,s,t)};r.update=function(s,t,u){b(r,s,t,u)};r.refresh=function(s){if(s){r.progressBar=s}n(r)};return r};g.defaults("fluid.progress",{selectors:{displayElement:".fl-progress",progressBar:".fl-progress-bar",indicator:".fl-progress-indicator",label:".fl-progress-label",ariaElement:".fl-progress-bar"},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false,ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."})})(jQuery,fluid_0_8);fluid_0_8=fluid_0_8||{};(function(f,g){var A=function(C,B){return C.locate("fileQueue").find("#"+B.id)
};var e=function(E,F){var D=E.uploadManager.queue.files;for(var C=0;C<D.length;C++){var B=D[C];if(B.id.toString()===F.attr("id")){return B}}return null};var t=function(C,B){var D=B.id+"_progress";return C.fileProgressors[D]};var y=function(D,B){var C=A(D,B);D.scroller.scrollTo(C);var E=t(D,B);E.refresh(C);E.show()};var o=function(E,C,D,B){var F=g.uploader.derivePercent(D,B);var G=F+"%";t(E,C).update(F,G)};var m=function(D,B){var C=A(D,B);t(D,B).hide();if(B.filestatus===g.uploader.fileStatusConstants.COMPLETE){D.locate("fileIconBtn",C).removeClass("dim")}};var c=function(D,C){var E=t(D,C);if(!E){return}var B=E.displayElement;B.remove()};var b=function(C,B,D){c(C,B);C.uploadManager.removeFile(B);D.fadeOut("fast",function(){D.remove();C.refreshView()})};var k=function(C,D){var B=e(C,D);if(!B||B.filestatus===g.uploader.fileStatusConstants.COMPLETE){return}b(C,B,D)};var v=function(C,B){var D=A(C,B);b(C,B,D)};var j=function(E,C){var D=function(){if(E.hasClass(C.ready)&&!E.hasClass(C.uploading)){E.addClass(C.hover)}};var B=function(){if(E.hasClass(C.ready)&&!E.hasClass(C.uploading)){E.removeClass(C.hover)}};E.hover(D,B)};var h=function(B,D){var C=function(){k(B,D)};g.activatable(D,null,{additionalBindings:[{key:g.a11y.keys.DELETE,activateHandler:C}]})};var l=function(B,C){if(f.browser.msie&&f.browser.version<7){j(C,B.options.styles)}B.locate("fileIconBtn",C).click(function(){k(B,C)});h(B,C)};var q=function(C,B){var D=C.locate("rowTemplate").clone();C.locate("fileName",D).text(B.name);C.locate("fileSize",D).text(g.uploader.formatFileSize(B.size));C.locate("fileIconBtn",D).addClass(C.options.styles.remove);D.attr("id",B.id);D.addClass(C.options.styles.ready).addClass(C.options.styles.row);l(C,D);return D};var p=function(D,C,F){var B=D.locate("rowProgressorTemplate",D.uploadContainer).clone();var E=C.id+"_progress";B.attr("id",E);B.css("top",F.position().top);B.height(F.height()).width(5);D.container.after(B);D.fileProgressors[E]=g.progress(D.uploadContainer,{selectors:{progressBar:"#"+C.id,displayElement:"#"+E,label:"#"+E+" .file-progress-text",indicator:"#"+E}})};var u=function(C,B){var D=q(C,B);D.hide();C.container.append(D);D.fadeIn("slow");C.scroller.scrollBottom();p(C,B,D);C.refreshView()};var x=function(B){var C=B.locate("fileIconBtn",B.locate("fileRows"));C.attr("disabled","disabled");C.addClass("dim")};var s=function(B){var C=B.locate("fileIconBtn",B.locate("fileRows"));C.removeAttr("disabled");C.removeClass("dim")};var n=function(C,B){C.removeClass("ready error").addClass(B)};var a=function(D,C){var E=A(D,C);n(E,D.options.styles.uploaded);E.attr("title",D.options.strings.status.success);g.enabled(E,false);var B=D.locate("fileIconBtn",E);B.unbind("click");B.removeClass(D.options.styles.remove);B.attr("title",D.options.strings.status.success)};var z=function(E,C,B){m(E,C);if(C.filestatus===g.uploader.fileStatusConstants.ERROR){var D=A(E,C);n(D,E.options.styles.error)}};var r=function(B){B.returnedOptions={listeners:{afterFileQueued:B.addFile,onUploadStart:B.prepareForUpload,onFileStart:B.showFileProgress,onFileProgress:B.updateFileProgress,onFileSuccess:B.markFileComplete,onFileError:B.showErrorForFile,afterFileComplete:B.hideFileProgress,afterUploadComplete:B.repairFromUpload}}};var w=function(B){g.tabbable(B.container);B.selectableContext=g.selectable(B.container,{selectableSelector:B.options.selectors.fileRows,onSelect:function(C){f(C).addClass(B.options.styles.selected)},onUnselect:function(C){f(C).removeClass(B.options.styles.selected)}})};var d=function(C,B){C.uploadManager=B;C.scroller=g.scroller(C.container);w(C);r(C)};g.fileQueueView=function(C,F,B,D){var E=g.initView("fluid.fileQueueView",C,D);E.uploadContainer=F;E.fileProgressors={};E.addFile=function(G){u(E,G)};E.removeFile=function(G){v(E,G)};E.prepareForUpload=function(){x(E)};E.repairFromUpload=function(){s(E)};E.showFileProgress=function(G){y(E,G)};E.updateFileProgress=function(H,I,G){o(E,H,I,G)};E.markFileComplete=function(G){t(E,G).update(100,"100%");a(E,G)};E.showErrorForFile=function(H,G){z(E,H,G)};E.hideFileProgress=function(G){m(E,G)};E.refreshView=function(){E.scroller.refreshView();E.selectableContext.refresh()};d(E,B);return E};g.defaults("fluid.fileQueueView",{selectors:{fileRows:".row",fileName:".fileName",fileSize:".fileSize",fileIconBtn:".iconBtn",rowTemplate:"#queue-row-tmplt",rowProgressorTemplate:"#row-progressor-tmplt"},styles:{row:"row",ready:"ready",uploading:"uploading",hover:"hover",selected:"selected",uploaded:"uploaded",error:"error",remove:"removeFile"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error"}}})})(jQuery,fluid_0_8);(function(g,l){var q=function(w,x){x.removeAttr("disabled");x.removeClass(w.options.styles.dim)};var n=function(w,x){x.attr("disabled","disabled");x.addClass(w.options.styles.dim)};var a=function(w,x){x.removeClass(w.options.styles.hidden)};var e=function(w,x){x.addClass(w.options.styles.hidden)};var f=function(w){n(w,w.locate("uploadButton"));if(w.uploadManager.queue.files.length===0){w.locate("browseButton").text(w.options.strings.buttons.browse);a(w,w.locate("instructions"))}};var c=function(w){n(w,w.locate("uploadButton"));q(w,w.locate("browseButton"));e(w,w.locate("pauseButton"));a(w,w.locate("uploadButton"))};var m=function(w){w.locate("browseButton").text(w.options.strings.buttons.addMore);e(w,w.locate("pauseButton"));a(w,w.locate("uploadButton"));q(w,w.locate("uploadButton"));q(w,w.locate("browseButton"));e(w,w.locate("instructions"))};var d=function(w){e(w,w.locate("uploadButton"));n(w,w.locate("browseButton"));q(w,w.locate("pauseButton"));a(w,w.locate("pauseButton"));w.locate(w.options.focusWithEvent.afterUploadStart).focus()};var s=function(z){var x=z.uploadManager.queue.getReadyFiles().length;var A=z.uploadManager.queue.sizeOfReadyFiles();var w=(x===1)?z.options.strings.progress.singleFile:z.options.strings.progress.pluralFiles;var y=l.stringTemplate(z.options.strings.progress.toUploadLabel,{fileCount:x,fileLabel:w,totalBytes:l.uploader.formatFileSize(A)});z.locate("totalFileStatusText").html(y)};var b=function(z){var y=z.uploadManager.queue.currentBatch;var w=l.uploader.derivePercent(y.totalBytesUploaded,y.totalBytes);var x=l.stringTemplate(z.options.strings.progress.totalProgressLabel,{curFileN:y.fileIdx+1,totalFilesN:y.files.length,currBytes:l.uploader.formatFileSize(y.totalBytesUploaded),totalBytes:l.uploader.formatFileSize(y.totalBytes)});z.totalProgress.update(w,x)};var k=function(y){var w=y.uploadManager.queue.getUploadedFiles();var x=l.stringTemplate(y.options.strings.progress.completedLabel,{curFileN:w.length,totalCurrBytes:l.uploader.formatFileSize(y.uploadManager.queue.sizeOfUploadedFiles())});y.totalProgress.update(100,x);y.totalProgress.hide()};var p=function(w){w.locate("browseButton").click(function(x){w.uploadManager.browseForFiles();x.preventDefault()});w.locate("uploadButton").click(function(){w.uploadManager.start()});w.locate("pauseButton").click(function(){w.uploadManager.stop()})};var v=function(w){if(w.uploadManager.queue.getReadyFiles().length>0){m(w);s(w);w.locate(w.options.focusWithEvent.afterFileDialog).focus()}};var h=function(w){if(w.uploadManager.queue.getReadyFiles().length===0){f(w)}s(w)};var t=function(w){w.totalProgress.hide();m(w)};var o=function(w){k(w);if(w.uploadManager.queue.getReadyFiles().length===0){c(w)}else{m(w)}};var r=function(w){w.events.afterFileDialog.addListener(function(){v(w)});w.events.afterFileRemoved.addListener(function(){h(w)});w.events.onUploadStart.addListener(function(){d(w)});w.events.onUploadStop.addListener(function(){w.locate(w.options.focusWithEvent.afterUploadStop).focus()});w.events.onFileProgress.addListener(function(){b(w)});w.events.onFileError.addListener(function(y,x,z){if(x===l.uploader.errorConstants.UPLOAD_STOPPED){t(w)}});w.events.afterUploadComplete.addListener(function(){o(w)})};var u=function(x){var w=l.initSubcomponent(x,"uploadManager",[x.events,l.COMPONENT_OPTIONS]);return x.options.demo?l.demoUploadManager(w):w};var j=function(w){w.decorators=l.initSubcomponents(w,"decorators",[w,l.COMPONENT_OPTIONS]);w.uploadManager=u(w);w.fileQueueView=l.initSubcomponent(w,"fileQueueView",[w.locate("fileQueue"),w.container,w.uploadManager,l.COMPONENT_OPTIONS]);w.totalProgress=l.initSubcomponent(w,"totalProgressBar",[w.container,l.COMPONENT_OPTIONS]);n(w,w.locate("uploadButton"));p(w);r(w)};l.uploader=function(w,x){var y=l.initView("fluid.uploader",w,x);j(y);return y};l.progressiveEnhanceableUploader=function(w,y,x){y=l.container(y);w=l.container(w);if(swfobject.getFlashPlayerVersion().major<9){y.show()}else{w.show();return l.uploader(w,x)}};l.uploader.formatFileSize=function(w){if(typeof w==="number"){if(w===0){return"0.0 KB"}else{if(w>0){if(w<1048576){return(Math.ceil(w/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(w/1048576*10)/10).toFixed(1)+" MB"}}}}return""};l.uploader.derivePercent=function(w,x){return Math.round((w*100)/x)};l.defaults("fluid.uploader",{demo:false,decorators:{type:"fluid.swfUploadSetupDecorator"},uploadManager:{type:"fluid.swfUploadManager"},fileQueueView:{type:"fluid.fileQueueView"},totalProgressBar:{type:"fluid.progress",options:{selectors:{progressBar:".fl-scroller-table-foot",displayElement:".total-progress",label:".total-file-progress",indicator:".total-progress"}}},selectors:{fileQueue:".fl-uploader-queue",browseButton:".fl-uploader-browse",uploadButton:".fl-uploader-upload",resumeButton:".fl-uploader-resume",pauseButton:".fl-uploader-pause",totalFileProgressBar:".fl-scroller-table-foot",totalFileStatusText:".total-file-progress",instructions:".fl-uploader-browse-instructions"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"disabled",hidden:"hidden",dim:"dim"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{pausedLabel:"Paused at: %curFileN of %totalFilesN files (%currBytes of %totalBytes)",toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN files (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN files (%totalCurrBytes)",singleFile:"file",pluralFiles:"files"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"}}});
l.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};l.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5}})(jQuery,fluid_0_8);